<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Storage Buckets API</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <meta content="Bikeshed version d9f9c3533, updated Fri Mar 10 11:31:29 2023 -0800" name="generator">
  <link href="https://wicg.github.io/storage-buckets/" rel="canonical">
  <meta content="fbfe27a1dfe2daef6186a653a52e000883d8ba3d" name="document-revision">
<style>/* style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}
</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}
</style>
<style>/* style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    min-width: min-content;
    max-width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

            pre.idl.highlight {
                background: var(--borderedblock-bg, var(--def-bg));
            }
            
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-var-click-highlighting */

    var { cursor: pointer; }
    var.selected0 { background-color: #F4D200; box-shadow: 0 0 0 2px #F4D200; }
    var.selected1 { background-color: #FF87A2; box-shadow: 0 0 0 2px #FF87A2; }
    var.selected2 { background-color: #96E885; box-shadow: 0 0 0 2px #96E885; }
    var.selected3 { background-color: #3EEED2; box-shadow: 0 0 0 2px #3EEED2; }
    var.selected4 { background-color: #EACFB6; box-shadow: 0 0 0 2px #EACFB6; }
    var.selected5 { background-color: #82DDFF; box-shadow: 0 0 0 2px #82DDFF; }
    var.selected6 { background-color: #FFBCF2; box-shadow: 0 0 0 2px #FFBCF2; }
    </style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Storage Buckets API</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="2023-03-17">17 March 2023</time></p>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/storage-buckets/">https://wicg.github.io/storage-buckets/</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/WICG/storage-buckets/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:estade@google.com">Evan Stade</a> (<a class="p-org org" href="https://www.google.com/">Google</a>)
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:ayui@google.com">Ayu Ishii</a> (<a class="p-org org" href="https://www.google.com/">Google</a>)
     <dt class="editor">Former Editor:
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Victor Costan</span>
     <dt>Participate:
     <dd><a href="https://github.com/WICG/storage-buckets">GitHub WICG/storage-buckets</a> (<a href="https://github.com/WICG/storage-buckets/issues/new">new issue</a>, <a href="https://github.com/WICG/storage-buckets/issues?state=open">open issues</a>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2023 the Contributors to the Storage Buckets API Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>The Storage Buckets API provides a way for sites to organize locally stored data into groupings called "storage buckets". This allows the user agent or sites to manage and delete buckets independently rather than applying the same treatment to all the data from a single origin.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#storage-bucket-manager"><span class="secno">1</span> <span class="content">The <code class="idl"><span>StorageBucketManager</span></code> interface</span></a>
     <ol class="toc">
      <li><a href="#storage-bucket-open"><span class="secno">1.1</span> <span class="content">Creating a bucket</span></a>
      <li><a href="#storage-bucket-delete"><span class="secno">1.2</span> <span class="content">Deleting a bucket</span></a>
      <li><a href="#storage-bucket-keys"><span class="secno">1.3</span> <span class="content">Enumerating buckets</span></a>
     </ol>
    <li>
     <a href="#storage-bucket"><span class="secno">2</span> <span class="content">The <code class="idl"><span>StorageBucket</span></code> interface</span></a>
     <ol class="toc">
      <li><a href="#storage-bucket-persistence"><span class="secno">2.1</span> <span class="content">Persistence</span></a>
      <li><a href="#storage-bucket-quota"><span class="secno">2.2</span> <span class="content">Quota</span></a>
      <li><a href="#storage-bucket-durability"><span class="secno">2.3</span> <span class="content">Durability</span></a>
      <li><a href="#storage-bucket-expiration"><span class="secno">2.4</span> <span class="content">Expiration</span></a>
      <li>
       <a href="#storage-bucket-endpoints"><span class="secno">2.5</span> <span class="content">Using storage endpoints</span></a>
       <ol class="toc">
        <li><a href="#storage-bucket-indexeddb"><span class="secno">2.5.1</span> <span class="content">Using Indexed Database</span></a>
        <li><a href="#storage-bucket-caches"><span class="secno">2.5.2</span> <span class="content">Using CacheStorage</span></a>
        <li><a href="#storage-bucket-getdirectory"><span class="secno">2.5.3</span> <span class="content">Using an Origin Private File System</span></a>
       </ol>
      <li><a href="#storage-bucket-clear-site-data"><span class="secno">2.6</span> <span class="content">Clear Site Data integration</span></a>
     </ol>
    <li><a href="#security-privacy"><span class="secno">3</span> <span class="content">Security and privacy considerations</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="storage-bucket-manager"><span class="secno">1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#storagebucketmanager" id="ref-for-storagebucketmanager">StorageBucketManager</a></code> interface</span><a class="self-link" href="#storage-bucket-manager"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <c- b>mixin</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="navigatorstoragebuckets"><code><c- g>NavigatorStorageBuckets</c-></code></dfn> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#storagebucketmanager" id="ref-for-storagebucketmanager①"><c- n>StorageBucketManager</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="StorageBucketManager" href="#dom-navigatorstoragebuckets-storagebuckets" id="ref-for-dom-navigatorstoragebuckets-storagebuckets"><c- g>storageBuckets</c-></a>;
};
<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator" id="ref-for-navigator"><c- n>Navigator</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="#navigatorstoragebuckets" id="ref-for-navigatorstoragebuckets"><c- n>NavigatorStorageBuckets</c-></a>;
<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/workers.html#workernavigator" id="ref-for-workernavigator"><c- n>WorkerNavigator</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="#navigatorstoragebuckets" id="ref-for-navigatorstoragebuckets①"><c- n>NavigatorStorageBuckets</c-></a>;
</pre>
   <p>Each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object">environment settings object</a> has an associated <code class="idl"><a data-link-type="idl" href="#storagebucketmanager" id="ref-for-storagebucketmanager②">StorageBucketManager</a></code> object.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="NavigatorStorageBuckets" data-dfn-type="attribute" data-export id="dom-navigatorstoragebuckets-storagebuckets"><code>storageBuckets</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object">relevant settings object</a>'s <code class="idl"><a data-link-type="idl" href="#storagebucketmanager" id="ref-for-storagebucketmanager③">StorageBucketManager</a></code> object.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->),
 <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext①"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="storagebucketmanager"><code><c- g>StorageBucketManager</c-></code></dfn> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#storagebucket" id="ref-for-storagebucket"><c- n>StorageBucket</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucketmanager-open" id="ref-for-dom-storagebucketmanager-open"><c- g>open</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="StorageBucketManager/open(name, options), StorageBucketManager/open(name)" data-dfn-type="argument" data-export id="dom-storagebucketmanager-open-name-options-name"><code><c- g>name</c-></code><a class="self-link" href="#dom-storagebucketmanager-open-name-options-name"></a></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-storagebucketoptions" id="ref-for-dictdef-storagebucketoptions"><c- n>StorageBucketOptions</c-></a> <dfn class="idl-code" data-dfn-for="StorageBucketManager/open(name, options), StorageBucketManager/open(name)" data-dfn-type="argument" data-export id="dom-storagebucketmanager-open-name-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-storagebucketmanager-open-name-options-options"></a></dfn> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-storagebucketmanager-keys" id="ref-for-dom-storagebucketmanager-keys"><c- g>keys</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise②"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucketmanager-delete" id="ref-for-dom-storagebucketmanager-delete"><c- g>delete</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="StorageBucketManager/delete(name)" data-dfn-type="argument" data-export id="dom-storagebucketmanager-delete-name-name"><code><c- g>name</c-></code><a class="self-link" href="#dom-storagebucketmanager-delete-name-name"></a></dfn>);
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-storagebucketdurability"><code><c- g>StorageBucketDurability</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="StorageBucketDurability" data-dfn-type="enum-value" data-export id="dom-storagebucketdurability-strict"><code><c- s>"strict"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="StorageBucketDurability" data-dfn-type="enum-value" data-export id="dom-storagebucketdurability-relaxed"><code><c- s>"relaxed"</c-></code></dfn>
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-storagebucketoptions"><code><c- g>StorageBucketOptions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a>? <dfn class="dfn-paneled idl-code" data-default="null" data-dfn-for="StorageBucketOptions" data-dfn-type="dict-member" data-export data-type="boolean? " id="dom-storagebucketoptions-persisted"><code><c- g>persisted</c-></code></dfn> = <c- b>null</c->;
  <a data-link-type="idl-name" href="#enumdef-storagebucketdurability" id="ref-for-enumdef-storagebucketdurability"><c- n>StorageBucketDurability</c-></a>? <dfn class="dfn-paneled idl-code" data-default="null" data-dfn-for="StorageBucketOptions" data-dfn-type="dict-member" data-export data-type="StorageBucketDurability? " id="dom-storagebucketoptions-durability"><code><c- g>durability</c-></code></dfn> = <c- b>null</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a>? <dfn class="dfn-paneled idl-code" data-default="null" data-dfn-for="StorageBucketOptions" data-dfn-type="dict-member" data-export data-type="unsigned long long? " id="dom-storagebucketoptions-quota"><code><c- g>quota</c-></code></dfn> = <c- b>null</c->;
  <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a>? <dfn class="dfn-paneled idl-code" data-default="null" data-dfn-for="StorageBucketOptions" data-dfn-type="dict-member" data-export data-type="DOMHighResTimeStamp? " id="dom-storagebucketoptions-expires"><code><c- g>expires</c-></code></dfn> = <c- b>null</c->;
};
</pre>
   <h3 class="heading settled" data-level="1.1" id="storage-bucket-open"><span class="secno">1.1. </span><span class="content">Creating a bucket</span><a class="self-link" href="#storage-bucket-open"></a></h3>
   <div class="algorithm" data-algorithm="open(name, options)" data-algorithm-for="StorageBucketManager">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="StorageBucketManager" data-dfn-type="method" data-export data-lt="open(name, options)|open(name)" id="dom-storagebucketmanager-open"><code>open(<var>name</var>, <var>options</var>)</code></dfn> method steps are:</p>
    <ol>
     <li data-md>
      <p>Let <var>environment</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>shelf</var> be the result of running <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#obtain-a-local-storage-shelf" id="ref-for-obtain-a-local-storage-shelf">obtain a local storage shelf</a> given <var>environment</var>.</p>
     <li data-md>
      <p>If <var>shelf</var> is failure, then return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with">a promise rejected with</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code>.</p>
     <li data-md>
      <p>If the result of <a data-link-type="dfn" href="#validate-a-bucket-name" id="ref-for-validate-a-bucket-name">validate a bucket name</a> with <var>name</var> is failure,  then return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①">a promise rejected with</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>r</var> be the result of running <a data-link-type="dfn" href="#open-a-bucket" id="ref-for-open-a-bucket">open a bucket</a> with <var>shelf</var>, <var>name</var>, and <var>options</var>.</p>
     <li data-md>
      <p>If <var>r</var> is failure, then return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with②">a promise rejected with</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-resolved-with" id="ref-for-a-promise-resolved-with">a promise resolved with</a> with <var>r</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="open a bucket">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="open-a-bucket">open a bucket</dfn> for a <var>shelf</var> given a bucket <var>name</var> and optional <var>options</var>, run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>expires</var> be undefined.</p>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-storagebucketoptions-expires" id="ref-for-dom-storagebucketoptions-expires">expires</a></code>"] exists, then:</p>
      <ol>
       <li data-md>
        <p>Let <var>expires</var> be <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-storagebucketoptions-expires" id="ref-for-dom-storagebucketoptions-expires①">expires</a></code>"].</p>
       <li data-md>
        <p>If <var>expires</var> milliseconds after the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-unix-epoch" id="ref-for-dfn-unix-epoch">Unix epoch</a> is before the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object②">relevant settings object</a>'s <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-current-wall-time" id="ref-for-dfn-current-wall-time">current wall time</a>, then return failure.</p>
      </ol>
     <li data-md>
      <p>Let <var>quota</var> be undefined.</p>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-storagebucketoptions-quota" id="ref-for-dom-storagebucketoptions-quota">quota</a></code>"] exists, then:</p>
      <ol>
       <li data-md>
        <p>Let <var>quota</var> be <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-storagebucketoptions-quota" id="ref-for-dom-storagebucketoptions-quota①">quota</a></code>"].</p>
       <li data-md>
        <p>If <var>quota</var> is less than or equal to zero, then return failure.</p>
      </ol>
     <li data-md>
      <p>Let <var>persisted</var> be false.</p>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-storagebucketoptions-persisted" id="ref-for-dom-storagebucketoptions-persisted">persisted</a></code>"] exists and is true, then:</p>
      <ol>
       <li data-md>
        <p>Let <var>permission</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-request-permission-to-use" id="ref-for-dfn-request-permission-to-use">requesting permission to use</a> <code>"persistent-storage"</code>.</p>
       <li data-md>
        <p>If <var>permission</var> is "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted">granted</a></code>", then set <var>persisted</var> to true.</p>
      </ol>
     <li data-md>
      <p>Let <var>bucket</var> be the result of running <a data-link-type="dfn" href="#get-or-expire-a-bucket" id="ref-for-get-or-expire-a-bucket">get or expire a bucket</a> with <var>shelf</var> and <var>name</var>.</p>
     <li data-md>
      <p>If <var>bucket</var> is null, then:</p>
      <ol>
       <li data-md>
        <p>Let <var>bucket</var> be a new <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket">storage bucket</a> with name <var>name</var>.</p>
       <li data-md>
        <p>Set <var>bucket</var>’s <a data-link-type="dfn" href="#storagebucket-durability-value" id="ref-for-storagebucket-durability-value">durability value</a> to <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-storagebucketoptions-durability" id="ref-for-dom-storagebucketoptions-durability">durability</a></code>"] if it exists.</p>
       <li data-md>
        <p>Set <var>bucket</var>’s <a data-link-type="dfn" href="#storagebucket-quota-value" id="ref-for-storagebucket-quota-value">quota value</a> to <var>quota</var>.</p>
       <li data-md>
        <p>Set <var>shelf</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-map" id="ref-for-bucket-map">bucket map</a>[<var>name</var>] to <var>bucket</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>persisted</var> is true, set <var>bucket</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-mode" id="ref-for-bucket-mode">bucket mode</a> to <code>"persistent"</code>.</p>
     <li data-md>
      <p>Set <var>bucket</var>’s <a data-link-type="dfn" href="#storagebucket-expiration-time" id="ref-for-storagebucket-expiration-time">expiration</a> to <var>expires</var> milliseconds after the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-unix-epoch" id="ref-for-dfn-unix-epoch①">Unix epoch</a>.</p>
     <li data-md>
      <p>Let <var>storageBucket</var> be a new <code class="idl"><a data-link-type="idl" href="#storagebucket" id="ref-for-storagebucket①">StorageBucket</a></code>.</p>
     <li data-md>
      <p>Set <var>storageBucket</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket①">storage bucket</a> to <var>bucket</var>.</p>
     <li data-md>
      <p>Return <var>storageBucket</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="validate a bucket name">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="validate-a-bucket-name">validate a bucket name</dfn> given string <var>name</var>, run the following steps:</p>
    <ol>
     <li data-md>
      <p>If <var>name</var> contains any <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-point" id="ref-for-code-point">code point</a> that is not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-lower-alpha" id="ref-for-ascii-lower-alpha">ASCII lower alpha</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-digit" id="ref-for-ascii-digit">ASCII digit</a>, U+005F (_), or U+002D(-), then return failure.</p>
     <li data-md>
      <p>If <var>name</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-code-point-length" id="ref-for-string-code-point-length">code point length</a> is 0 or exceeds 64, then return failure.</p>
     <li data-md>
      <p>If <var>name</var> begins with U+005F (_) or U+002D(-), then return failure.</p>
     <li data-md>
      <p>Return.</p>
    </ol>
   </div>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-or-expire-a-bucket">get or expire a bucket</dfn> on a <var>shelf</var> given string <var>name</var>, run the following steps:</p>
   <ol>
    <li data-md>
     <p>Let <var>bucket</var> be <var>shelf</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-map" id="ref-for-bucket-map①">bucket map</a>[<var>name</var>] if exists. Otherwise return null.</p>
    <li data-md>
     <p>If <var>bucket</var>’s <a data-link-type="dfn" href="#storagebucket-expiration-time" id="ref-for-storagebucket-expiration-time①">expiration time</a> is non-null and before the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object③">relevant settings object</a>'s <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-current-wall-time" id="ref-for-dfn-current-wall-time①">current wall time</a>, then:</p>
     <ol>
      <li data-md>
       <p>Set <var>bucket</var>’s <a data-link-type="dfn" href="#storage-bucket-removed" id="ref-for-storage-bucket-removed">removed</a> to true.</p>
      <li data-md>
       <p>Return null.</p>
     </ol>
    <li data-md>
     <p>Return <var>bucket</var>.</p>
   </ol>
   <p>When not null or undefined, <code class="idl"><a data-link-type="idl" href="#dom-storagebucketoptions-durability" id="ref-for-dom-storagebucketoptions-durability①">durability</a></code> is a hint to the user agent
specifying the desired <code class="idl"><a data-link-type="idl" href="#dom-storagebucket-durability" id="ref-for-dom-storagebucket-durability">durability</a></code>. The user agent MAY
create a new <code class="idl"><a data-link-type="idl" href="#storagebucket" id="ref-for-storagebucket②">StorageBucket</a></code> with this <a data-link-type="dfn" href="#storagebucket-durability-value" id="ref-for-storagebucket-durability-value①">durability value</a>. The user agent
MUST NOT modify the <a data-link-type="dfn" href="#storagebucket-durability-value" id="ref-for-storagebucket-durability-value②">durability value</a> of an existing bucket.</p>
   <h3 class="heading settled" data-level="1.2" id="storage-bucket-delete"><span class="secno">1.2. </span><span class="content">Deleting a bucket</span><a class="self-link" href="#storage-bucket-delete"></a></h3>
   <div class="algorithm" data-algorithm="delete(name)" data-algorithm-for="StorageBucketManager">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="StorageBucketManager" data-dfn-type="method" data-export id="dom-storagebucketmanager-delete"><code>delete(<var>name</var>)</code></dfn> method steps are:</p>
    <ol>
     <li data-md>
      <p>Let <var>environment</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object④">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>shelf</var> be the result of running <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#obtain-a-local-storage-shelf" id="ref-for-obtain-a-local-storage-shelf①">obtain a local storage shelf</a> given <var>environment</var>.</p>
     <li data-md>
      <p>If <var>shelf</var> is failure, then return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with③">a promise rejected with</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>If the result of <a data-link-type="dfn" href="#validate-a-bucket-name" id="ref-for-validate-a-bucket-name①">validate a bucket name</a> with <var>name</var> is failure, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject">reject</a> <var>p</var> with an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidcharactererror" id="ref-for-invalidcharactererror">InvalidCharacterError</a></code> and abort these steps.</p>
       <li data-md>
        <p>Let <var>r</var> be the result of running <a data-link-type="dfn" href="#remove-a-bucket" id="ref-for-remove-a-bucket">remove a bucket</a> with <var>shelf</var> and <var>name</var>.</p>
       <li data-md>
        <p>If <var>r</var> is failure, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①">reject</a> <var>p</var> with <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④">TypeError</a></code>.</p>
       <li data-md>
        <p>Otherwise, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve">resolve</a> <var>p</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="remove a bucket">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="remove-a-bucket">remove a bucket</dfn> on a <var>shelf</var> given a bucket <var>name</var>, run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>bucket</var> be <var>shelf</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-map" id="ref-for-bucket-map②">bucket map</a>[<var>name</var>] if exists. Otherwise return.</p>
     <li data-md>
      <p>Remove <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-key" id="ref-for-map-key">key</a> <var>name</var> in <var>shelf</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-map" id="ref-for-bucket-map③">bucket map</a>.</p>
     <li data-md>
      <p>Set <var>bucket</var>’s <a data-link-type="dfn" href="#storage-bucket-removed" id="ref-for-storage-bucket-removed①">removed</a> to true.</p>
     <li data-md>
      <p>Return.</p>
    </ol>
    <aside class="note">
     <p>Specific storage endpoints may need to run additional actions to remove data when a storage bucket is set as removed.</p>
    </aside>
    <p class="issue" id="issue-4958726d"><a class="self-link" href="#issue-4958726d"></a> <a data-link-type="biblio" href="#biblio-indexeddb-3" title="Indexed Database API 3.0">[IndexedDB-3]</a> needs to define how deletion occurs when data is evicted by quota.</p>
    <p class="issue" id="issue-c5f1de1a"><a class="self-link" href="#issue-c5f1de1a"></a> <a data-link-type="biblio" href="#biblio-fs" title="File System Standard">[FS]</a> needs to define how deletion occurs for Origin Private File System when data is evicted by quota.</p>
    <p class="issue" id="issue-2e7a487e"><a class="self-link" href="#issue-2e7a487e"></a> <a data-link-type="biblio" href="#biblio-service-workers" title="Service Workers">[Service-Workers]</a> needs to define how deletion occurs for CacheStorage and Service Workers when data is evicted by quota.</p>
   </div>
   <h3 class="heading settled" data-level="1.3" id="storage-bucket-keys"><span class="secno">1.3. </span><span class="content">Enumerating buckets</span><a class="self-link" href="#storage-bucket-keys"></a></h3>
   <div class="algorithm" data-algorithm="keys()" data-algorithm-for="StorageBucketManager">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="StorageBucketManager" data-dfn-type="method" data-export id="dom-storagebucketmanager-keys"><code>keys()</code></dfn> method steps are:</p>
    <ol>
     <li data-md>
      <p>Let <var>shelf</var> be the result of running <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#obtain-a-local-storage-shelf" id="ref-for-obtain-a-local-storage-shelf②">obtain a local storage shelf</a>.</p>
     <li data-md>
      <p>If <var>shelf</var> is failure, then return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with④">a promise rejected with</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise①">a new promise</a>.</p>
     <li data-md>
      <p>Let <var>keys</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a>.</p>
     <li data-md>
      <p>For each <var>key</var> in <var>shelf</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-map" id="ref-for-bucket-map④">bucket map</a>, run the following steps:</p>
      <ol>
       <li data-md>
        <p>Let <var>bucket</var> be the result of running <a data-link-type="dfn" href="#get-or-expire-a-bucket" id="ref-for-get-or-expire-a-bucket①">get or expire a bucket</a> with <var>shelf</var> and <var>key</var>.</p>
       <li data-md>
        <p>If <var>bucket</var> is non-null, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">append</a> <var>key</var> to <var>keys</var>.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task">Queue a task</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①">resolve</a> <var>p</var> with <var>keys</var>.</p>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="2" id="storage-bucket"><span class="secno">2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#storagebucket" id="ref-for-storagebucket③">StorageBucket</a></code> interface</span><a class="self-link" href="#storage-bucket"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->),
 <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext②"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="storagebucket"><code><c- g>StorageBucket</c-></code></dfn> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=<c- n>Window</c->] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise③"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucket-persist" id="ref-for-dom-storagebucket-persist"><c- g>persist</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise④"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucket-persisted" id="ref-for-dom-storagebucket-persisted"><c- g>persisted</c-></a>();

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑤"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://storage.spec.whatwg.org/#dictdef-storageestimate" id="ref-for-dictdef-storageestimate"><c- n>StorageEstimate</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucket-estimate" id="ref-for-dom-storagebucket-estimate"><c- g>estimate</c-></a>();

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑥"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-storagebucketdurability" id="ref-for-enumdef-storagebucketdurability①"><c- n>StorageBucketDurability</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucket-durability" id="ref-for-dom-storagebucket-durability①"><c- g>durability</c-></a>();

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑦"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucket-setexpires" id="ref-for-dom-storagebucket-setexpires"><c- g>setExpires</c-></a>(<a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp①"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="idl-code" data-dfn-for="StorageBucket/setExpires(expires)" data-dfn-type="argument" data-export id="dom-storagebucket-setexpires-expires-expires"><code><c- g>expires</c-></code><a class="self-link" href="#dom-storagebucket-setexpires-expires-expires"></a></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑧"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp②"><c- n>DOMHighResTimeStamp</c-></a>?> <a class="idl-code" data-link-type="method" href="#dom-storagebucket-expires" id="ref-for-dom-storagebucket-expires"><c- g>expires</c-></a>();

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject①"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/IndexedDB/#idbfactory" id="ref-for-idbfactory"><c- n>IDBFactory</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="IDBFactory" href="#dom-storagebucket-indexeddb" id="ref-for-dom-storagebucket-indexeddb"><c- g>indexedDB</c-></a>;

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject②"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/ServiceWorker/#cachestorage" id="ref-for-cachestorage"><c- n>CacheStorage</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CacheStorage" href="#dom-storagebucket-caches" id="ref-for-dom-storagebucket-caches"><c- g>caches</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑨"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://fs.spec.whatwg.org/#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle"><c- n>FileSystemDirectoryHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucket-getdirectory" id="ref-for-dom-storagebucket-getdirectory"><c- g>getDirectory</c-></a>();
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#storagebucket" id="ref-for-storagebucket④">StorageBucket</a></code> has an associated <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket②">storage bucket</a>.</p>
   <p>A <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket③">storage bucket</a> has an associated <dfn class="dfn-paneled" data-dfn-for="storage bucket" data-dfn-type="dfn" data-noexport id="storage-bucket-removed">removed</dfn> flag, which is a boolean, initially false. Set as true when a <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket④">storage bucket</a> is deleted.</p>
   <aside class="note">
    <p>Browsers will probably have IPC and disk accesses that make operations asynchronous. Promises are resolved from tasks to permit this kind of work.</p>
   </aside>
   <h3 class="heading settled" data-level="2.1" id="storage-bucket-persistence"><span class="secno">2.1. </span><span class="content">Persistence</span><a class="self-link" href="#storage-bucket-persistence"></a></h3>
   <p class="issue" id="issue-3271f8e6"><a class="self-link" href="#issue-3271f8e6"></a> Merge with <a href="https://storage.spec.whatwg.org/#buckets"><cite>Storage</cite> § 4.5 Storage buckets</a> which already defines <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-mode" id="ref-for-bucket-mode①">bucket mode</a>.</p>
   <div class="algorithm" data-algorithm="persist()" data-algorithm-for="StorageBucket">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="StorageBucket" data-dfn-type="method" data-export id="dom-storagebucket-persist"><code>persist()</code></dfn> method steps are:</p>
    <ol>
     <li data-md>
      <p>Let <var>bucket</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③">this</a>'s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket⑤">storage bucket</a>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object⑤">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise②">a new promise</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>bucket</var>’s <a data-link-type="dfn" href="#storage-bucket-removed" id="ref-for-storage-bucket-removed②">removed</a> flag is true, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②">reject</a> <var>p</var> with <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror">InvalidStateError</a></code>.</p>
       <li data-md>
        <p>If <var>bucket</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-mode" id="ref-for-bucket-mode②">bucket mode</a> is <code>"persistent"</code>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②">resolve</a> <var>p</var> with true.</p>
       <li data-md>
        <p>Otherwise,</p>
        <ol>
         <li data-md>
          <p>Let <var>permission</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-getting-the-current-permission-state" id="ref-for-dfn-getting-the-current-permission-state">getting the current permission state</a> with <code>"persistent-storage"</code> and <var>environment</var>.</p>
         <li data-md>
          <p>If <var>permission</var> is "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted①">granted</a></code>", then set <var>bucket</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-mode" id="ref-for-bucket-mode③">bucket mode</a> to <code>"persistent"</code> and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task①">queue a task</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve③">resolve</a> <var>p</var> with true.</p>
         <li data-md>
          <p>Otherwise, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve④">resolve</a> <var>p</var> with false.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="persisted()" data-algorithm-for="StorageBucket">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="StorageBucket" data-dfn-type="method" data-export id="dom-storagebucket-persisted"><code>persisted()</code></dfn> method steps are:</p>
    <ol>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise③">a new promise</a>.</p>
     <li data-md>
      <p>Let <var>bucket</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑤">this</a>'s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket⑥">storage bucket</a>.</p>
     <li data-md>
      <p>If <var>bucket</var>’s <a data-link-type="dfn" href="#storage-bucket-removed" id="ref-for-storage-bucket-removed③">removed</a> flag is true, then <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task②">queue a task</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject③">reject</a> <var>p</var> with an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①">InvalidStateError</a></code>.</p>
     <li data-md>
      <p>Otherwise,</p>
      <ol>
       <li data-md>
        <p>If <var>bucket</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-mode" id="ref-for-bucket-mode④">bucket mode</a> is <code>"persistent"</code>, then <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task③">queue a task</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑤">resolve</a> <var>p</var> with true.</p>
       <li data-md>
        <p>Otherwise, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task④">queue a task</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑥">resolve</a> <var>p</var> with false.</p>
      </ol>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.2" id="storage-bucket-quota"><span class="secno">2.2. </span><span class="content">Quota</span><a class="self-link" href="#storage-bucket-quota"></a></h3>
   <p>A <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket⑦">storage bucket</a> has a <dfn class="dfn-paneled" data-dfn-for="StorageBucket" data-dfn-type="dfn" data-noexport id="storagebucket-quota-value">quota value</dfn>, a number-or-null, initially null.
Specifies the upper limit of usage in bytes which can be used by the bucket. The user agent MAY further
limit the realized storage space.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-for="storage bucket" data-dfn-type="dfn" data-noexport id="storage-bucket-storage-usage">storage usage</dfn> of a <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket⑧">storage bucket</a> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined">implementation-defined</a> rough estimate
of the number of bytes used by all of its <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bottle" id="ref-for-storage-bottle">storage bottle</a>s.</p>
   <div class="algorithm" data-algorithm="estimate()" data-algorithm-for="StorageBucket">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="StorageBucket" data-dfn-type="method" data-export id="dom-storagebucket-estimate"><code>estimate()</code></dfn> method steps are:</p>
    <ol>
     <li data-md>
      <p>Let <var>environment</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑥">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object⑥">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>shelf</var> be the result of running <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#obtain-a-local-storage-shelf" id="ref-for-obtain-a-local-storage-shelf③">obtain a local storage shelf</a> with <var>environment</var>.</p>
     <li data-md>
      <p>If <var>shelf</var> is failure, then return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑤">a promise rejected with</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>bucket</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑦">this</a>'s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket⑨">storage bucket</a>.</p>
     <li data-md>
      <p>If <var>bucket</var>’s <a data-link-type="dfn" href="#storage-bucket-removed" id="ref-for-storage-bucket-removed④">removed</a> flag is true, then return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑥">a promise rejected with</a> an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror②">InvalidStateError</a></code>.</p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise④">a new promise</a>.</p>
     <li data-md>
      <p>Otherwise, run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel②">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>quota</var> be <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota">storage quota</a> for <var>shelf</var>.</p>
       <li data-md>
        <p>Set <var>quota</var> to <var>bucket</var>’s <a data-link-type="dfn" href="#storagebucket-quota-value" id="ref-for-storagebucket-quota-value①">quota value</a> if it is non-null.</p>
       <li data-md>
        <p>Let <var>usage</var> be <a data-link-type="dfn" href="#storage-bucket-storage-usage" id="ref-for-storage-bucket-storage-usage">storage usage</a> for <var>bucket</var>.</p>
       <li data-md>
        <p>Let <var>dictionary</var> be a new <code class="idl"><a data-link-type="idl" href="https://storage.spec.whatwg.org/#dictdef-storageestimate" id="ref-for-dictdef-storageestimate①">StorageEstimate</a></code> dictionary whose <code class="idl"><a data-link-type="idl" href="https://storage.spec.whatwg.org/#dom-storageestimate-usage" id="ref-for-dom-storageestimate-usage">usage</a></code> member is <var>usage</var> and <code class="idl"><a data-link-type="idl" href="https://storage.spec.whatwg.org/#dom-storageestimate-quota" id="ref-for-dom-storageestimate-quota">quota</a></code> member is <var>quota</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑦">Resolve</a> <var>p</var> with <var>dictionary</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <aside class="note">
    <p>The <a data-link-type="dfn" href="#storagebucket-quota-value" id="ref-for-storagebucket-quota-value②">quota value</a> will be ignored if it exceeds the total amount of space available to the <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-shelf" id="ref-for-storage-shelf">storage shelf</a>, i.e. site.
Its intended use is to keep a specific bucket from using up the entire site’s storage space.</p>
   </aside>
   <h3 class="heading settled" data-level="2.3" id="storage-bucket-durability"><span class="secno">2.3. </span><span class="content">Durability</span><a class="self-link" href="#storage-bucket-durability"></a></h3>
   <p>A <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket①⓪">storage bucket</a> has a <dfn class="dfn-paneled" data-dfn-for="StorageBucket" data-dfn-type="dfn" data-noexport id="storagebucket-durability-value">durability value</dfn>, a <code class="idl"><a data-link-type="idl" href="#enumdef-storagebucketdurability" id="ref-for-enumdef-storagebucketdurability②">StorageBucketDurability</a></code>.
The user agent MAY initialize this value to "<code class="idl"><a data-link-type="idl" href="#dom-storagebucketdurability-strict" id="ref-for-dom-storagebucketdurability-strict">strict</a></code>" or
"<code class="idl"><a data-link-type="idl" href="#dom-storagebucketdurability-relaxed" id="ref-for-dom-storagebucketdurability-relaxed">relaxed</a></code>". The user agent SHOULD ignore the <a data-link-type="dfn" href="#storagebucket-durability-value" id="ref-for-storagebucket-durability-value③">durability value</a> for operations that otherwise specify durability behavior.</p>
   <div class="algorithm" data-algorithm="durability()" data-algorithm-for="StorageBucket">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="StorageBucket" data-dfn-type="method" data-export id="dom-storagebucket-durability"><code>durability()</code></dfn> method steps are:</p>
    <ol>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise⑤">a new promise</a>.</p>
     <li data-md>
      <p>Let <var>bucket</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑧">this</a>'s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket①①">storage bucket</a>.</p>
     <li data-md>
      <p>If <var>bucket</var>’s <a data-link-type="dfn" href="#storage-bucket-removed" id="ref-for-storage-bucket-removed⑤">removed</a> flag is true, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task⑤">queue a task</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject④">reject</a> <var>p</var> with an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror③">InvalidStateError</a></code>.</p>
     <li data-md>
      <p>Otherwise, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task⑥">queue a task</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑧">resolve</a> <var>p</var> with <var>bucket</var>’s <a data-link-type="dfn" href="#storagebucket-durability-value" id="ref-for-storagebucket-durability-value④">durability value</a>.</p>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <aside class="note">
    <p>The durability reflects whether the user agent will prioritize performance or durability when completing operations on data in the bucket.
Some operations, such as <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/IndexedDB/#idbtransaction" id="ref-for-idbtransaction">IDBTransaction</a></code>s, can specify a durability which will override the <a data-link-type="dfn" href="#storagebucket-durability-value" id="ref-for-storagebucket-durability-value⑤">durability value</a>. The default <a data-link-type="dfn" href="#storagebucket-durability-value" id="ref-for-storagebucket-durability-value⑥">durability value</a> is left to the user agent. Durability can be specified when a bucket is initially created, but not changed later.
The <code class="idl"><a data-link-type="idl" href="#dom-storagebucket-durability" id="ref-for-dom-storagebucket-durability②">durability()</a></code> method should report what the user agent will actually do. The value is one of the following:</p>
    <dl>
     <dt data-md>"<code class="idl"><a data-link-type="idl" href="#dom-storagebucketdurability-strict" id="ref-for-dom-storagebucketdurability-strict①">strict</a></code>"
     <dd data-md>
      <p>The user agent will consider that operations on data in the bucket are successful only after verifying that outstanding changes have been written to a persistent storage medium.</p>
     <dt data-md>"<code class="idl"><a data-link-type="idl" href="#dom-storagebucketdurability-relaxed" id="ref-for-dom-storagebucketdurability-relaxed①">relaxed</a></code>"
     <dd data-md>
      <p>The user agent will consider that operations on data in the bucket are successful as soon as all outstanding changes have been written to the operating system, without subsequent verification.</p>
    </dl>
   </aside>
   <h3 class="heading settled" data-level="2.4" id="storage-bucket-expiration"><span class="secno">2.4. </span><span class="content">Expiration</span><a class="self-link" href="#storage-bucket-expiration"></a></h3>
   <p>A <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket①②">storage bucket</a> has an <dfn class="dfn-paneled" data-dfn-for="StorageBucket" data-dfn-type="dfn" data-noexport id="storagebucket-expiration-time">expiration time</dfn>, which is either null or a <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-moment" id="ref-for-dfn-moment">moment</a> on the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-wall-clock" id="ref-for-dfn-wall-clock">wall clock</a>, initially null.
Specifies the upper limit of a bucket lifetime.</p>
   <p>The <a data-link-type="dfn" href="#get-or-expire-a-bucket" id="ref-for-get-or-expire-a-bucket②">get or expire a bucket</a> algorithm removes expired buckets when <code class="idl"><a data-link-type="idl" href="#dom-storagebucketmanager-keys" id="ref-for-dom-storagebucketmanager-keys①">keys()</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-storagebucketmanager-open" id="ref-for-dom-storagebucketmanager-open①">open()</a></code> is called.
User agents MAY clear buckets whose <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-mode" id="ref-for-bucket-mode⑤">bucket mode</a> is <code>"best-effort"</code> before their <a data-link-type="dfn" href="#storagebucket-expiration-time" id="ref-for-storagebucket-expiration-time②">expiration time</a> when faced with storage pressure.
User agents MAY remove any buckets before <code class="idl"><a data-link-type="idl" href="#dom-storagebucketmanager-open" id="ref-for-dom-storagebucketmanager-open②">open()</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-storagebucketmanager-keys" id="ref-for-dom-storagebucketmanager-keys②">keys()</a></code> is called when the expiration is reached regardless of the <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-mode" id="ref-for-bucket-mode⑥">bucket mode</a></p>
   <div class="algorithm" data-algorithm="setExpires(expires)" data-algorithm-for="StorageBucket">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="StorageBucket" data-dfn-type="method" data-export id="dom-storagebucket-setexpires"><code>setExpires(<var>expires</var>)</code></dfn> method steps are:</p>
    <ol>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise⑥">a new promise</a>.</p>
     <li data-md>
      <p>Let <var>bucket</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑨">this</a>'s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket①③">storage bucket</a>.</p>
     <li data-md>
      <p>If <var>bucket</var>’s <a data-link-type="dfn" href="#storage-bucket-removed" id="ref-for-storage-bucket-removed⑥">removed</a> flag is true, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task⑦">queue a task</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑤">reject</a> <var>p</var> with an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror④">InvalidStateError</a></code>.</p>
     <li data-md>
      <p>Otherwise, set <var>bucket</var>’s <a data-link-type="dfn" href="#storagebucket-expiration-time" id="ref-for-storagebucket-expiration-time③">expiration time</a> to <var>expires</var> milliseconds after the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-unix-epoch" id="ref-for-dfn-unix-epoch②">Unix epoch</a> and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task⑧">queue a task</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑨">resolve</a> <var>p</var>.</p>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="expires()" data-algorithm-for="StorageBucket">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="StorageBucket" data-dfn-type="method" data-export id="dom-storagebucket-expires"><code>expires()</code></dfn> method steps are:</p>
    <ol>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise⑦">a new promise</a>.</p>
     <li data-md>
      <p>Let <var>bucket</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⓪">this</a>'s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket①④">storage bucket</a>.</p>
     <li data-md>
      <p>If <var>bucket</var>’s <a data-link-type="dfn" href="#storage-bucket-removed" id="ref-for-storage-bucket-removed⑦">removed</a> flag is true, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task⑨">queue a task</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑥">reject</a> <var>p</var> with an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror⑤">InvalidStateError</a></code>.</p>
     <li data-md>
      <p>Otherwise, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task①⓪">queue a task</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①⓪">resolve</a> <var>p</var> with <var>bucket</var>’s <a data-link-type="dfn" href="#storagebucket-expiration-time" id="ref-for-storagebucket-expiration-time④">expiration time</a>.</p>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.5" id="storage-bucket-endpoints"><span class="secno">2.5. </span><span class="content">Using storage endpoints</span><a class="self-link" href="#storage-bucket-endpoints"></a></h3>
   <p>Storage endpoints, i.e. storage bottles, can be accessed as described below.</p>
   <h4 class="heading settled" data-level="2.5.1" id="storage-bucket-indexeddb"><span class="secno">2.5.1. </span><span class="content">Using Indexed Database</span><a class="self-link" href="#storage-bucket-indexeddb"></a></h4>
   <p class="issue" id="issue-4f9abb58"><a class="self-link" href="#issue-4f9abb58"></a> <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/IndexedDB/#idbfactory" id="ref-for-idbfactory①">IDBFactory</a></code> methods need to take a storage bottle map rather than a storageKey.</p>
   <div class="algorithm" data-algorithm="indexedDB" data-algorithm-for="StorageBucket">
    <p>A <code class="idl"><a data-link-type="idl" href="#storagebucket" id="ref-for-storagebucket⑤">StorageBucket</a></code> has an <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/IndexedDB/#idbfactory" id="ref-for-idbfactory②">IDBFactory</a></code> object, initially null. The <dfn class="dfn-paneled idl-code" data-dfn-for="StorageBucket" data-dfn-type="attribute" data-export id="dom-storagebucket-indexeddb"><code>indexedDB</code></dfn> getter steps are:</p>
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①①">this</a>'s <code class="idl"><a data-link-type="idl" href="#dom-storagebucket-indexeddb" id="ref-for-dom-storagebucket-indexeddb①">indexedDB</a></code> is null, run the following steps:</p>
      <ol>
       <li data-md>
        <p>Let <var>bucket</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①②">this</a>'s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket①⑤">storage bucket</a>.</p>
       <li data-md>
        <p>Let <var>bottle map</var> be the result of <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#obtain-a-local-storage-bottle-map" id="ref-for-obtain-a-local-storage-bottle-map">obtain a local storage bottle map</a> with <var>bucket</var> and <code>"indexedDB"</code>.</p>
       <li data-md>
        <p>Let <var>indexedDB</var> be an <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/IndexedDB/#idbfactory" id="ref-for-idbfactory③">IDBFactory</a></code> object.</p>
       <li data-md>
        <p>Set the <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bottle-map" id="ref-for-bottle-map">bottle map</a> for <var>indexedDB</var> to <var>bottle map</var>.</p>
       <li data-md>
        <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①③">this</a>'s <code class="idl"><a data-link-type="idl" href="#dom-storagebucket-indexeddb" id="ref-for-dom-storagebucket-indexeddb②">indexedDB</a></code> to <var>indexedDB</var>.</p>
      </ol>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①④">this</a>'s <code class="idl"><a data-link-type="idl" href="#dom-storagebucket-indexeddb" id="ref-for-dom-storagebucket-indexeddb③">indexedDB</a></code>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="calculate the effective durability hint">
    <p>The user agent MUST consider the <a data-link-type="dfn" href="#storagebucket-durability-value" id="ref-for-storagebucket-durability-value⑦">durability value</a> when evaluating the <a data-link-type="dfn" href="https://w3c.github.io/IndexedDB/#transaction-durability-hint" id="ref-for-transaction-durability-hint">durability hint</a> <var>durability</var> of an <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/IndexedDB/#idbtransaction" id="ref-for-idbtransaction①">IDBTransaction</a></code> <var>transaction</var>. To <dfn data-dfn-type="dfn" data-noexport id="calculate-the-effective-durability-hint">calculate the effective <a data-link-type="dfn" href="https://w3c.github.io/IndexedDB/#transaction-durability-hint" id="ref-for-transaction-durability-hint①">durability hint</a><a class="self-link" href="#calculate-the-effective-durability-hint"></a></dfn> for <var>transaction</var> with associated <var>bucket</var>:</p>
    <ol>
     <li data-md>
      <p>If <var>durability</var> is not "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/IndexedDB/#dom-idbtransactiondurability-default" id="ref-for-dom-idbtransactiondurability-default">default</a></code>", then return <var>durability</var>.</p>
     <li data-md>
      <p>If <var>bucket</var>’s <a data-link-type="dfn" href="#storagebucket-durability-value" id="ref-for-storagebucket-durability-value⑧">durability value</a> is "<code class="idl"><a data-link-type="idl" href="#dom-storagebucketdurability-strict" id="ref-for-dom-storagebucketdurability-strict②">strict</a></code>", then return "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/IndexedDB/#dom-idbtransactiondurability-strict" id="ref-for-dom-idbtransactiondurability-strict">strict</a></code>".</p>
     <li data-md>
      <p>Return "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/IndexedDB/#dom-idbtransactiondurability-relaxed" id="ref-for-dom-idbtransactiondurability-relaxed">relaxed</a></code>".</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.5.2" id="storage-bucket-caches"><span class="secno">2.5.2. </span><span class="content">Using CacheStorage</span><a class="self-link" href="#storage-bucket-caches"></a></h4>
   <div class="algorithm" data-algorithm="caches" data-algorithm-for="StorageBucket">
    <p>A <code class="idl"><a data-link-type="idl" href="#storagebucket" id="ref-for-storagebucket⑥">StorageBucket</a></code> has a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#cachestorage" id="ref-for-cachestorage①">CacheStorage</a></code> object, initially null. The <dfn class="dfn-paneled idl-code" data-dfn-for="StorageBucket" data-dfn-type="attribute" data-export id="dom-storagebucket-caches"><code>caches</code></dfn> getter steps are:</p>
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑤">this</a>'s <code class="idl"><a data-link-type="idl" href="#dom-storagebucket-caches" id="ref-for-dom-storagebucket-caches①">caches</a></code> is null, run the following steps:</p>
      <ol>
       <li data-md>
        <p>Let <var>bucket</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑥">this</a>'s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket①⑥">storage bucket</a>.</p>
       <li data-md>
        <p>Let <var>bottle map</var> be the result of <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#obtain-a-local-storage-bottle-map" id="ref-for-obtain-a-local-storage-bottle-map①">obtain a local storage bottle map</a> with <var>bucket</var> and <code>"cacheStorage"</code>.</p>
       <li data-md>
        <p>Let <var>cacheStorage</var> be a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#cachestorage" id="ref-for-cachestorage②">CacheStorage</a></code> object.</p>
       <li data-md>
        <p>Set the <a data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#dfn-relevant-name-to-cache-map" id="ref-for-dfn-relevant-name-to-cache-map">relevant name to cache map</a> for <var>cacheStorage</var> to <var>bottle map</var>.</p>
       <li data-md>
        <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑦">this</a>'s <code class="idl"><a data-link-type="idl" href="#dom-storagebucket-caches" id="ref-for-dom-storagebucket-caches②">caches</a></code> to <var>cacheStorage</var>.</p>
      </ol>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑧">this</a>'s <code class="idl"><a data-link-type="idl" href="#dom-storagebucket-caches" id="ref-for-dom-storagebucket-caches③">caches</a></code>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.5.3" id="storage-bucket-getdirectory"><span class="secno">2.5.3. </span><span class="content">Using an Origin Private File System</span><a class="self-link" href="#storage-bucket-getdirectory"></a></h4>
   <p class="issue" id="issue-0d9f1d43"><a class="self-link" href="#issue-0d9f1d43"></a> <a data-link-type="biblio" href="#biblio-storage" title="Storage Standard">[Storage]</a> needs to define helpers to retrieve the bottle map for a given (non-default) bucket.</p>
   <p class="issue" id="issue-25ffaa8c"><a class="self-link" href="#issue-25ffaa8c"></a> <a data-link-type="biblio" href="#biblio-fs" title="File System Standard">[FS]</a> needs to define a helper to retrieve an OPFS given a bottle map.</p>
   <div class="algorithm" data-algorithm="getDirectory()" data-algorithm-for="StorageBucket">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="StorageBucket" data-dfn-type="method" data-export id="dom-storagebucket-getdirectory"><code>getDirectory()</code></dfn> steps are:</p>
    <ol>
     <li data-md>
      <p>Let <var>map</var> be the result of <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#obtain-a-local-storage-bottle-map" id="ref-for-obtain-a-local-storage-bottle-map②">obtain a local storage bottle map</a> with <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑨">this</a>'s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket①⑦">storage bucket</a> and <code>"fileSystem"</code>.</p>
     <li data-md>
      <p>Return the result of <code class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#dom-storagemanager-getdirectory" id="ref-for-dom-storagemanager-getdirectory">getDirectory</a></code> with <var>map</var>.</p>
    </ol>
   </div>
   <aside class="note">
    <p>See <a href="https://fs.spec.whatwg.org/#sandboxed-filesystem"><cite>File System</cite> § 3 Accessing the Origin Private File System</a>.</p>
   </aside>
   <h3 class="heading settled" data-level="2.6" id="storage-bucket-clear-site-data"><span class="secno">2.6. </span><span class="content">Clear Site Data integration</span><a class="self-link" href="#storage-bucket-clear-site-data"></a></h3>
   <p class="issue" id="issue-99cfd987"><a class="self-link" href="#issue-99cfd987"></a> Update <a href="https://w3c.github.io/webappsec-clear-site-data/#header"><cite>Clear Site Data</cite> § 3.1 The Clear-Site-Data HTTP Response Header Field</a>.</p>
   <dl>
    <dt data-md>"<dfn data-dfn-type="grammar" data-export id="grammardef-storagebucket-name"><code>storage:bucket-name</code><a class="self-link" href="#grammardef-storagebucket-name"></a></dfn>"
    <dd data-md>
     <p>If the type string starts with "<code>storage:</code>" then the remaining characters after the <code>:</code> will be taken to refer to a specific <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket①⑧">storage bucket</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin">origin</a> of a
  particular response’s URL.</p>
   </dl>
   <p class="issue" id="issue-99223a67"><a class="self-link" href="#issue-99223a67"></a> add the steps below to the algorithm in <a href="https://w3c.github.io/webappsec-clear-site-data/#parsing"><cite>Clear Site Data</cite> § 4.1 Parsing</a>.</p>
   <div class="algorithm" data-algorithm="parse a Clear-Site-Data header with buckets">
    <p>To <dfn data-dfn-type="dfn" data-noexport id="parse-a-clear-site-data-header-with-buckets">parse a Clear-Site-Data header with buckets<a class="self-link" href="#parse-a-clear-site-data-header-with-buckets"></a></dfn>, execute the following steps:</p>
    <ol>
     <li data-md>
      <p>For each <var>type</var> in <var>header</var>, execute the following steps:</p>
      <ol>
       <li data-md>
        <p>If <var>type</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-starts-with" id="ref-for-string-starts-with">start with</a> <code>"storage:"</code>, abort these steps.</p>
       <li data-md>
        <p>Let <var>bucket name</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-unit-substring-by-positions" id="ref-for-code-unit-substring-by-positions">code unit substring</a> from 8 to end of <var>type</var>.</p>
       <li data-md>
        <p>If the result of <a data-link-type="dfn" href="#validate-a-bucket-name" id="ref-for-validate-a-bucket-name②">validate a bucket name</a> with <var>bucket name</var> is failure, then abort these steps.</p>
       <li data-md>
        <p>Append a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple">tuple</a> consisting of (<code>"storage-bucket"</code>, <var>bucket name</var>) to <var>types</var></p>
      </ol>
    </ol>
   </div>
   <p class="issue" id="issue-99223a67①"><a class="self-link" href="#issue-99223a67①"></a> add the steps below to the algorithm in <a href="https://w3c.github.io/webappsec-clear-site-data/#clear-response"><cite>Clear Site Data</cite> § 4.2 Clear data for response</a>.</p>
   <div class="algorithm" data-algorithm="clear data with buckets">
    <p>To <dfn data-dfn-type="dfn" data-noexport id="clear-data-with-buckets">clear data with buckets<a class="self-link" href="#clear-data-with-buckets"></a></dfn> given a <var>bucket name</var>, execute the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>environment</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⓪">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object⑦">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>shelf</var> be the result of running <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#obtain-a-local-storage-shelf" id="ref-for-obtain-a-local-storage-shelf④">obtain a local storage shelf</a> given <var>environment</var>.</p>
     <li data-md>
      <p>If <var>shelf</var> is failure, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦">TypeError</a></code> and abort these steps.</p>
     <li data-md>
      <p>For each <var>type</var> in <var>types</var>, execute the following steps:</p>
      <ol>
       <li data-md>
        <p>If <var>type</var> is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple①">tuple</a> or <var>type</var>[0] is not <code>"storage-bucket"</code>, abort these steps.</p>
       <li data-md>
        <p>Let <var>bucket</var> be <var>shelf</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-map" id="ref-for-bucket-map⑤">bucket map</a>[<var>bucket name</var>] if one exists. Otherwise abort these steps</p>
       <li data-md>
        <p>Remove <var>bucket</var>.</p>
      </ol>
    </ol>
   </div>
   <h2 class="heading settled" data-level="3" id="security-privacy"><span class="secno">3. </span><span class="content">Security and privacy considerations</span><a class="self-link" href="#security-privacy"></a></h2>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
   <p>Requirements phrased in the imperative as part of algorithms
    (such as "strip any leading space characters"
    or "return false and abort these steps")
    are to be interpreted with the meaning of the key word
    ("must", "should", "may", etc)
    used in introducing the algorithm. </p>
   <p>Conformance requirements phrased as algorithms or specific steps
    can be implemented in any manner,
    so long as the end result is equivalent.
    In particular, the algorithms defined in this specification
    are intended to be easy to understand
    and are not intended to be performant.
    Implementers are encouraged to optimize. </p>
  </div>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-storagebucket-caches">caches</a><span>, in § 2.5.2</span>
   <li><a href="#calculate-the-effective-durability-hint">calculate the effective durability hint</a><span>, in § 2.5.1</span>
   <li><a href="#clear-data-with-buckets">clear data with buckets</a><span>, in § 2.6</span>
   <li><a href="#dom-storagebucketmanager-delete">delete(name)</a><span>, in § 1.2</span>
   <li><a href="#dom-storagebucketoptions-durability">durability</a><span>, in § 1</span>
   <li><a href="#dom-storagebucket-durability">durability()</a><span>, in § 2.3</span>
   <li><a href="#storagebucket-durability-value">durability value</a><span>, in § 2.3</span>
   <li><a href="#dom-storagebucket-estimate">estimate()</a><span>, in § 2.2</span>
   <li><a href="#storagebucket-expiration-time">expiration time</a><span>, in § 2.4</span>
   <li><a href="#dom-storagebucketoptions-expires">expires</a><span>, in § 1</span>
   <li><a href="#dom-storagebucket-expires">expires()</a><span>, in § 2.4</span>
   <li><a href="#dom-storagebucket-getdirectory">getDirectory()</a><span>, in § 2.5.3</span>
   <li><a href="#get-or-expire-a-bucket">get or expire a bucket</a><span>, in § 1.1</span>
   <li><a href="#dom-storagebucket-indexeddb">indexedDB</a><span>, in § 2.5.1</span>
   <li><a href="#dom-storagebucketmanager-keys">keys()</a><span>, in § 1.3</span>
   <li><a href="#navigatorstoragebuckets">NavigatorStorageBuckets</a><span>, in § 1</span>
   <li><a href="#open-a-bucket">open a bucket</a><span>, in § 1.1</span>
   <li><a href="#dom-storagebucketmanager-open">open(name)</a><span>, in § 1.1</span>
   <li><a href="#dom-storagebucketmanager-open">open(name, options)</a><span>, in § 1.1</span>
   <li><a href="#parse-a-clear-site-data-header-with-buckets">parse a Clear-Site-Data header with buckets</a><span>, in § 2.6</span>
   <li><a href="#dom-storagebucket-persist">persist()</a><span>, in § 2.1</span>
   <li><a href="#dom-storagebucketoptions-persisted">persisted</a><span>, in § 1</span>
   <li><a href="#dom-storagebucket-persisted">persisted()</a><span>, in § 2.1</span>
   <li><a href="#dom-storagebucketoptions-quota">quota</a><span>, in § 1</span>
   <li><a href="#storagebucket-quota-value">quota value</a><span>, in § 2.2</span>
   <li><a href="#dom-storagebucketdurability-relaxed">"relaxed"</a><span>, in § 1</span>
   <li><a href="#remove-a-bucket">remove a bucket</a><span>, in § 1.2</span>
   <li><a href="#storage-bucket-removed">removed</a><span>, in § 2</span>
   <li><a href="#dom-storagebucket-setexpires">setExpires(expires)</a><span>, in § 2.4</span>
   <li><a href="#storagebucket">StorageBucket</a><span>, in § 2</span>
   <li><a href="#enumdef-storagebucketdurability">StorageBucketDurability</a><span>, in § 1</span>
   <li><a href="#storagebucketmanager">StorageBucketManager</a><span>, in § 1</span>
   <li><a href="#grammardef-storagebucket-name">storage:bucket-name</a><span>, in § 2.6</span>
   <li><a href="#dictdef-storagebucketoptions">StorageBucketOptions</a><span>, in § 1</span>
   <li><a href="#dom-navigatorstoragebuckets-storagebuckets">storageBuckets</a><span>, in § 1</span>
   <li><a href="#storage-bucket-storage-usage">storage usage</a><span>, in § 2.2</span>
   <li><a href="#dom-storagebucketdurability-strict">"strict"</a><span>, in § 1</span>
   <li><a href="#validate-a-bucket-name">validate a bucket name</a><span>, in § 1.1</span>
  </ul>
  <aside aria-labelledby="infopaneltitle-for-9d8e130057dd59bc8cab4f414e390ebf" class="dfn-panel" data-for="9d8e130057dd59bc8cab4f414e390ebf" id="infopanel-for-9d8e130057dd59bc8cab4f414e390ebf">
   <span id="infopaneltitle-for-9d8e130057dd59bc8cab4f414e390ebf" style="display:none">Info about the 'FileSystemDirectoryHandle' external reference.</span><a href="https://fs.spec.whatwg.org/#filesystemdirectoryhandle">https://fs.spec.whatwg.org/#filesystemdirectoryhandle</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-filesystemdirectoryhandle">2. The StorageBucket interface</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-eee674a7b8f683464c60fafdbfa9e8ab" class="dfn-panel" data-for="eee674a7b8f683464c60fafdbfa9e8ab" id="infopanel-for-eee674a7b8f683464c60fafdbfa9e8ab">
   <span id="infopaneltitle-for-eee674a7b8f683464c60fafdbfa9e8ab" style="display:none">Info about the 'getDirectory()' external reference.</span><a href="https://fs.spec.whatwg.org/#dom-storagemanager-getdirectory">https://fs.spec.whatwg.org/#dom-storagemanager-getdirectory</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagemanager-getdirectory">2.5.3. Using an Origin Private File System</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-0527034ee7070fda15ffa50c34dbbc63" class="dfn-panel" data-for="0527034ee7070fda15ffa50c34dbbc63" id="infopanel-for-0527034ee7070fda15ffa50c34dbbc63">
   <span id="infopaneltitle-for-0527034ee7070fda15ffa50c34dbbc63" style="display:none">Info about the 'DOMHighResTimeStamp' external reference.</span><a href="https://w3c.github.io/hr-time/#dom-domhighrestimestamp">https://w3c.github.io/hr-time/#dom-domhighrestimestamp</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-domhighrestimestamp">1. The StorageBucketManager interface</a>
    <li><a href="#ref-for-dom-domhighrestimestamp①">2. The StorageBucket interface</a> <a href="#ref-for-dom-domhighrestimestamp②">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-1f78bca61233b6a6957119204c181632" class="dfn-panel" data-for="1f78bca61233b6a6957119204c181632" id="infopanel-for-1f78bca61233b6a6957119204c181632">
   <span id="infopaneltitle-for-1f78bca61233b6a6957119204c181632" style="display:none">Info about the 'current wall time' external reference.</span><a href="https://w3c.github.io/hr-time/#dfn-current-wall-time">https://w3c.github.io/hr-time/#dfn-current-wall-time</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-current-wall-time">1.1. Creating a bucket</a> <a href="#ref-for-dfn-current-wall-time①">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-a33f352de1a9eb5d29cfa3005d40d072" class="dfn-panel" data-for="a33f352de1a9eb5d29cfa3005d40d072" id="infopanel-for-a33f352de1a9eb5d29cfa3005d40d072">
   <span id="infopaneltitle-for-a33f352de1a9eb5d29cfa3005d40d072" style="display:none">Info about the 'moment' external reference.</span><a href="https://w3c.github.io/hr-time/#dfn-moment">https://w3c.github.io/hr-time/#dfn-moment</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-moment">2.4. Expiration</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-c6a6e18a0bfb0f6727343f416cd90c01" class="dfn-panel" data-for="c6a6e18a0bfb0f6727343f416cd90c01" id="infopanel-for-c6a6e18a0bfb0f6727343f416cd90c01">
   <span id="infopaneltitle-for-c6a6e18a0bfb0f6727343f416cd90c01" style="display:none">Info about the 'unix epoch' external reference.</span><a href="https://w3c.github.io/hr-time/#dfn-unix-epoch">https://w3c.github.io/hr-time/#dfn-unix-epoch</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-unix-epoch">1.1. Creating a bucket</a> <a href="#ref-for-dfn-unix-epoch①">(2)</a>
    <li><a href="#ref-for-dfn-unix-epoch②">2.4. Expiration</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-9ce1d97c81991af84a4cfb8251a89c4e" class="dfn-panel" data-for="9ce1d97c81991af84a4cfb8251a89c4e" id="infopanel-for-9ce1d97c81991af84a4cfb8251a89c4e">
   <span id="infopaneltitle-for-9ce1d97c81991af84a4cfb8251a89c4e" style="display:none">Info about the 'wall clock' external reference.</span><a href="https://w3c.github.io/hr-time/#dfn-wall-clock">https://w3c.github.io/hr-time/#dfn-wall-clock</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-wall-clock">2.4. Expiration</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-3c82b19be23a00eb4bb6896ec20cd7aa" class="dfn-panel" data-for="3c82b19be23a00eb4bb6896ec20cd7aa" id="infopanel-for-3c82b19be23a00eb4bb6896ec20cd7aa">
   <span id="infopaneltitle-for-3c82b19be23a00eb4bb6896ec20cd7aa" style="display:none">Info about the 'Navigator' external reference.</span><a href="https://html.spec.whatwg.org/multipage/system-state.html#navigator">https://html.spec.whatwg.org/multipage/system-state.html#navigator</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigator">1. The StorageBucketManager interface</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-f9c60134d1166b5cbe490d111703a3b0" class="dfn-panel" data-for="f9c60134d1166b5cbe490d111703a3b0" id="infopanel-for-f9c60134d1166b5cbe490d111703a3b0">
   <span id="infopaneltitle-for-f9c60134d1166b5cbe490d111703a3b0" style="display:none">Info about the 'WorkerNavigator' external reference.</span><a href="https://html.spec.whatwg.org/multipage/workers.html#workernavigator">https://html.spec.whatwg.org/multipage/workers.html#workernavigator</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-workernavigator">1. The StorageBucketManager interface</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-d815dc723d8b4fe4b1166e2013ec62b7" class="dfn-panel" data-for="d815dc723d8b4fe4b1166e2013ec62b7" id="infopanel-for-d815dc723d8b4fe4b1166e2013ec62b7">
   <span id="infopaneltitle-for-d815dc723d8b4fe4b1166e2013ec62b7" style="display:none">Info about the 'environment settings object' external reference.</span><a href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-environment-settings-object">1. The StorageBucketManager interface</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-3a2763fcaa6bc82693554cf36780c0dd" class="dfn-panel" data-for="3a2763fcaa6bc82693554cf36780c0dd" id="infopanel-for-3a2763fcaa6bc82693554cf36780c0dd">
   <span id="infopaneltitle-for-3a2763fcaa6bc82693554cf36780c0dd" style="display:none">Info about the 'in parallel' external reference.</span><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-in-parallel">1.2. Deleting a bucket</a>
    <li><a href="#ref-for-in-parallel①">2.1. Persistence</a>
    <li><a href="#ref-for-in-parallel②">2.2. Quota</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-a95cc6f0be910557a60537e0256920b2" class="dfn-panel" data-for="a95cc6f0be910557a60537e0256920b2" id="infopanel-for-a95cc6f0be910557a60537e0256920b2">
   <span id="infopaneltitle-for-a95cc6f0be910557a60537e0256920b2" style="display:none">Info about the 'origin' external reference.</span><a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin">https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-settings-object-origin">2.6. Clear Site Data integration</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-da7ed5f190c4eedd375552d6f7876301" class="dfn-panel" data-for="da7ed5f190c4eedd375552d6f7876301" id="infopanel-for-da7ed5f190c4eedd375552d6f7876301">
   <span id="infopaneltitle-for-da7ed5f190c4eedd375552d6f7876301" style="display:none">Info about the 'queue a task' external reference.</span><a href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-queue-a-task">1.3. Enumerating buckets</a>
    <li><a href="#ref-for-queue-a-task①">2.1. Persistence</a> <a href="#ref-for-queue-a-task②">(2)</a> <a href="#ref-for-queue-a-task③">(3)</a> <a href="#ref-for-queue-a-task④">(4)</a>
    <li><a href="#ref-for-queue-a-task⑤">2.3. Durability</a> <a href="#ref-for-queue-a-task⑥">(2)</a>
    <li><a href="#ref-for-queue-a-task⑦">2.4. Expiration</a> <a href="#ref-for-queue-a-task⑧">(2)</a> <a href="#ref-for-queue-a-task⑨">(3)</a> <a href="#ref-for-queue-a-task①⓪">(4)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-bfb9cb6617f81a424ab20212af73bae3" class="dfn-panel" data-for="bfb9cb6617f81a424ab20212af73bae3" id="infopanel-for-bfb9cb6617f81a424ab20212af73bae3">
   <span id="infopaneltitle-for-bfb9cb6617f81a424ab20212af73bae3" style="display:none">Info about the 'relevant settings object' external reference.</span><a href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-relevant-settings-object">1. The StorageBucketManager interface</a>
    <li><a href="#ref-for-relevant-settings-object①">1.1. Creating a bucket</a> <a href="#ref-for-relevant-settings-object②">(2)</a> <a href="#ref-for-relevant-settings-object③">(3)</a>
    <li><a href="#ref-for-relevant-settings-object④">1.2. Deleting a bucket</a>
    <li><a href="#ref-for-relevant-settings-object⑤">2.1. Persistence</a>
    <li><a href="#ref-for-relevant-settings-object⑥">2.2. Quota</a>
    <li><a href="#ref-for-relevant-settings-object⑦">2.6. Clear Site Data integration</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-7ccd3fe71bd97702d40f89879f536d5b" class="dfn-panel" data-for="7ccd3fe71bd97702d40f89879f536d5b" id="infopanel-for-7ccd3fe71bd97702d40f89879f536d5b">
   <span id="infopaneltitle-for-7ccd3fe71bd97702d40f89879f536d5b" style="display:none">Info about the '"default"' external reference.</span><a href="https://w3c.github.io/IndexedDB/#dom-idbtransactiondurability-default">https://w3c.github.io/IndexedDB/#dom-idbtransactiondurability-default</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbtransactiondurability-default">2.5.1. Using Indexed Database</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-96ffc2f5b033479ebcbe053477983e7a" class="dfn-panel" data-for="96ffc2f5b033479ebcbe053477983e7a" id="infopanel-for-96ffc2f5b033479ebcbe053477983e7a">
   <span id="infopaneltitle-for-96ffc2f5b033479ebcbe053477983e7a" style="display:none">Info about the '"relaxed"' external reference.</span><a href="https://w3c.github.io/IndexedDB/#dom-idbtransactiondurability-relaxed">https://w3c.github.io/IndexedDB/#dom-idbtransactiondurability-relaxed</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbtransactiondurability-relaxed">2.5.1. Using Indexed Database</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-732cc0cf0e4c9d476383d238a7a5e81d" class="dfn-panel" data-for="732cc0cf0e4c9d476383d238a7a5e81d" id="infopanel-for-732cc0cf0e4c9d476383d238a7a5e81d">
   <span id="infopaneltitle-for-732cc0cf0e4c9d476383d238a7a5e81d" style="display:none">Info about the '"strict"' external reference.</span><a href="https://w3c.github.io/IndexedDB/#dom-idbtransactiondurability-strict">https://w3c.github.io/IndexedDB/#dom-idbtransactiondurability-strict</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-idbtransactiondurability-strict">2.5.1. Using Indexed Database</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-56e4bb6f5c5237eda504da1d4b54449a" class="dfn-panel" data-for="56e4bb6f5c5237eda504da1d4b54449a" id="infopanel-for-56e4bb6f5c5237eda504da1d4b54449a">
   <span id="infopaneltitle-for-56e4bb6f5c5237eda504da1d4b54449a" style="display:none">Info about the 'IDBFactory' external reference.</span><a href="https://w3c.github.io/IndexedDB/#idbfactory">https://w3c.github.io/IndexedDB/#idbfactory</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idbfactory">2. The StorageBucket interface</a>
    <li><a href="#ref-for-idbfactory①">2.5.1. Using Indexed Database</a> <a href="#ref-for-idbfactory②">(2)</a> <a href="#ref-for-idbfactory③">(3)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-40ee6466c7a60cfbaedb2014bc31a891" class="dfn-panel" data-for="40ee6466c7a60cfbaedb2014bc31a891" id="infopanel-for-40ee6466c7a60cfbaedb2014bc31a891">
   <span id="infopaneltitle-for-40ee6466c7a60cfbaedb2014bc31a891" style="display:none">Info about the 'IDBTransaction' external reference.</span><a href="https://w3c.github.io/IndexedDB/#idbtransaction">https://w3c.github.io/IndexedDB/#idbtransaction</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idbtransaction">2.3. Durability</a>
    <li><a href="#ref-for-idbtransaction①">2.5.1. Using Indexed Database</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-6dc0dc2bb5ff87160fa92c9b2bd6c0ea" class="dfn-panel" data-for="6dc0dc2bb5ff87160fa92c9b2bd6c0ea" id="infopanel-for-6dc0dc2bb5ff87160fa92c9b2bd6c0ea">
   <span id="infopaneltitle-for-6dc0dc2bb5ff87160fa92c9b2bd6c0ea" style="display:none">Info about the 'durability hint' external reference.</span><a href="https://w3c.github.io/IndexedDB/#transaction-durability-hint">https://w3c.github.io/IndexedDB/#transaction-durability-hint</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transaction-durability-hint">2.5.1. Using Indexed Database</a> <a href="#ref-for-transaction-durability-hint①">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-fcfc8b0ed220faa237969aed00e2586d" class="dfn-panel" data-for="fcfc8b0ed220faa237969aed00e2586d" id="infopanel-for-fcfc8b0ed220faa237969aed00e2586d">
   <span id="infopaneltitle-for-fcfc8b0ed220faa237969aed00e2586d" style="display:none">Info about the 'append' external reference.</span><a href="https://infra.spec.whatwg.org/#list-append">https://infra.spec.whatwg.org/#list-append</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-append">1.3. Enumerating buckets</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-c2f5d9b1ced7c40f62782a928198d3a8" class="dfn-panel" data-for="c2f5d9b1ced7c40f62782a928198d3a8" id="infopanel-for-c2f5d9b1ced7c40f62782a928198d3a8">
   <span id="infopaneltitle-for-c2f5d9b1ced7c40f62782a928198d3a8" style="display:none">Info about the 'ascii digit' external reference.</span><a href="https://infra.spec.whatwg.org/#ascii-digit">https://infra.spec.whatwg.org/#ascii-digit</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ascii-digit">1.1. Creating a bucket</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-f2b877833382750f00e188f032456059" class="dfn-panel" data-for="f2b877833382750f00e188f032456059" id="infopanel-for-f2b877833382750f00e188f032456059">
   <span id="infopaneltitle-for-f2b877833382750f00e188f032456059" style="display:none">Info about the 'ascii lower alpha' external reference.</span><a href="https://infra.spec.whatwg.org/#ascii-lower-alpha">https://infra.spec.whatwg.org/#ascii-lower-alpha</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ascii-lower-alpha">1.1. Creating a bucket</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-4103741029595e9e13c67dab91d1e3bd" class="dfn-panel" data-for="4103741029595e9e13c67dab91d1e3bd" id="infopanel-for-4103741029595e9e13c67dab91d1e3bd">
   <span id="infopaneltitle-for-4103741029595e9e13c67dab91d1e3bd" style="display:none">Info about the 'code point' external reference.</span><a href="https://infra.spec.whatwg.org/#code-point">https://infra.spec.whatwg.org/#code-point</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-code-point">1.1. Creating a bucket</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-0c5b8810162108ca42f42ac154072480" class="dfn-panel" data-for="0c5b8810162108ca42f42ac154072480" id="infopanel-for-0c5b8810162108ca42f42ac154072480">
   <span id="infopaneltitle-for-0c5b8810162108ca42f42ac154072480" style="display:none">Info about the 'code point length' external reference.</span><a href="https://infra.spec.whatwg.org/#string-code-point-length">https://infra.spec.whatwg.org/#string-code-point-length</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-string-code-point-length">1.1. Creating a bucket</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-ea6f005773fd4f991ff2d63239f90613" class="dfn-panel" data-for="ea6f005773fd4f991ff2d63239f90613" id="infopanel-for-ea6f005773fd4f991ff2d63239f90613">
   <span id="infopaneltitle-for-ea6f005773fd4f991ff2d63239f90613" style="display:none">Info about the 'code unit substring by positions' external reference.</span><a href="https://infra.spec.whatwg.org/#code-unit-substring-by-positions">https://infra.spec.whatwg.org/#code-unit-substring-by-positions</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-code-unit-substring-by-positions">2.6. Clear Site Data integration</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-fd74d8159933c4a74d0b23390bed43e3" class="dfn-panel" data-for="fd74d8159933c4a74d0b23390bed43e3" id="infopanel-for-fd74d8159933c4a74d0b23390bed43e3">
   <span id="infopaneltitle-for-fd74d8159933c4a74d0b23390bed43e3" style="display:none">Info about the 'implementation-defined' external reference.</span><a href="https://infra.spec.whatwg.org/#implementation-defined">https://infra.spec.whatwg.org/#implementation-defined</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-implementation-defined">2.2. Quota</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-c38550431b74fa21f9dd8b8680f1105c" class="dfn-panel" data-for="c38550431b74fa21f9dd8b8680f1105c" id="infopanel-for-c38550431b74fa21f9dd8b8680f1105c">
   <span id="infopaneltitle-for-c38550431b74fa21f9dd8b8680f1105c" style="display:none">Info about the 'key' external reference.</span><a href="https://infra.spec.whatwg.org/#map-key">https://infra.spec.whatwg.org/#map-key</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-map-key">1.2. Deleting a bucket</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-fafd38d2108e357bcc9a6fd7f3cd04a7" class="dfn-panel" data-for="fafd38d2108e357bcc9a6fd7f3cd04a7" id="infopanel-for-fafd38d2108e357bcc9a6fd7f3cd04a7">
   <span id="infopaneltitle-for-fafd38d2108e357bcc9a6fd7f3cd04a7" style="display:none">Info about the 'list' external reference.</span><a href="https://infra.spec.whatwg.org/#list">https://infra.spec.whatwg.org/#list</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list">1.3. Enumerating buckets</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-2d700262fcde3097fbf89ef2496f1f0d" class="dfn-panel" data-for="2d700262fcde3097fbf89ef2496f1f0d" id="infopanel-for-2d700262fcde3097fbf89ef2496f1f0d">
   <span id="infopaneltitle-for-2d700262fcde3097fbf89ef2496f1f0d" style="display:none">Info about the 'starts with' external reference.</span><a href="https://infra.spec.whatwg.org/#string-starts-with">https://infra.spec.whatwg.org/#string-starts-with</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-string-starts-with">2.6. Clear Site Data integration</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-decbbd3ee5a73b54e8e8996ce1fddbbc" class="dfn-panel" data-for="decbbd3ee5a73b54e8e8996ce1fddbbc" id="infopanel-for-decbbd3ee5a73b54e8e8996ce1fddbbc">
   <span id="infopaneltitle-for-decbbd3ee5a73b54e8e8996ce1fddbbc" style="display:none">Info about the 'tuple' external reference.</span><a href="https://infra.spec.whatwg.org/#tuple">https://infra.spec.whatwg.org/#tuple</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-tuple">2.6. Clear Site Data integration</a> <a href="#ref-for-tuple①">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-7b01ad8c5e8d011946cb54633b172084" class="dfn-panel" data-for="7b01ad8c5e8d011946cb54633b172084" id="infopanel-for-7b01ad8c5e8d011946cb54633b172084">
   <span id="infopaneltitle-for-7b01ad8c5e8d011946cb54633b172084" style="display:none">Info about the 'getting the current permission state' external reference.</span><a href="https://w3c.github.io/permissions/#dfn-getting-the-current-permission-state">https://w3c.github.io/permissions/#dfn-getting-the-current-permission-state</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-getting-the-current-permission-state">2.1. Persistence</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-180d5479814a4ae3b599e6a1c4e11751" class="dfn-panel" data-for="180d5479814a4ae3b599e6a1c4e11751" id="infopanel-for-180d5479814a4ae3b599e6a1c4e11751">
   <span id="infopaneltitle-for-180d5479814a4ae3b599e6a1c4e11751" style="display:none">Info about the 'granted' external reference.</span><a href="https://w3c.github.io/permissions/#dom-permissionstate-granted">https://w3c.github.io/permissions/#dom-permissionstate-granted</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionstate-granted">1.1. Creating a bucket</a>
    <li><a href="#ref-for-dom-permissionstate-granted①">2.1. Persistence</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-7761fb406c4d8cdb685b810244d5e5a6" class="dfn-panel" data-for="7761fb406c4d8cdb685b810244d5e5a6" id="infopanel-for-7761fb406c4d8cdb685b810244d5e5a6">
   <span id="infopaneltitle-for-7761fb406c4d8cdb685b810244d5e5a6" style="display:none">Info about the 'requesting permission to use' external reference.</span><a href="https://w3c.github.io/permissions/#dfn-request-permission-to-use">https://w3c.github.io/permissions/#dfn-request-permission-to-use</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-request-permission-to-use">1.1. Creating a bucket</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-58aed90a8ddd8f180862c716af7d25c6" class="dfn-panel" data-for="58aed90a8ddd8f180862c716af7d25c6" id="infopanel-for-58aed90a8ddd8f180862c716af7d25c6">
   <span id="infopaneltitle-for-58aed90a8ddd8f180862c716af7d25c6" style="display:none">Info about the 'CacheStorage' external reference.</span><a href="https://w3c.github.io/ServiceWorker/#cachestorage">https://w3c.github.io/ServiceWorker/#cachestorage</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cachestorage">2. The StorageBucket interface</a>
    <li><a href="#ref-for-cachestorage①">2.5.2. Using CacheStorage</a> <a href="#ref-for-cachestorage②">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-0b49a59f74c17df3b05704e7d7552584" class="dfn-panel" data-for="0b49a59f74c17df3b05704e7d7552584" id="infopanel-for-0b49a59f74c17df3b05704e7d7552584">
   <span id="infopaneltitle-for-0b49a59f74c17df3b05704e7d7552584" style="display:none">Info about the 'relevant name to cache map' external reference.</span><a href="https://w3c.github.io/ServiceWorker/#dfn-relevant-name-to-cache-map">https://w3c.github.io/ServiceWorker/#dfn-relevant-name-to-cache-map</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-relevant-name-to-cache-map">2.5.2. Using CacheStorage</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-907504f20c39c9094e157d0c50797ed3" class="dfn-panel" data-for="907504f20c39c9094e157d0c50797ed3" id="infopanel-for-907504f20c39c9094e157d0c50797ed3">
   <span id="infopaneltitle-for-907504f20c39c9094e157d0c50797ed3" style="display:none">Info about the 'StorageEstimate' external reference.</span><a href="https://storage.spec.whatwg.org/#dictdef-storageestimate">https://storage.spec.whatwg.org/#dictdef-storageestimate</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-storageestimate">2. The StorageBucket interface</a>
    <li><a href="#ref-for-dictdef-storageestimate①">2.2. Quota</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-8c2b9baa2bcf87b7479bc5d28f0c925a" class="dfn-panel" data-for="8c2b9baa2bcf87b7479bc5d28f0c925a" id="infopanel-for-8c2b9baa2bcf87b7479bc5d28f0c925a">
   <span id="infopaneltitle-for-8c2b9baa2bcf87b7479bc5d28f0c925a" style="display:none">Info about the 'bottle map' external reference.</span><a href="https://storage.spec.whatwg.org/#bottle-map">https://storage.spec.whatwg.org/#bottle-map</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-bottle-map">2.5.1. Using Indexed Database</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-7bed712fb187b01e9a5fb930d421c3c9" class="dfn-panel" data-for="7bed712fb187b01e9a5fb930d421c3c9" id="infopanel-for-7bed712fb187b01e9a5fb930d421c3c9">
   <span id="infopaneltitle-for-7bed712fb187b01e9a5fb930d421c3c9" style="display:none">Info about the 'bucket map' external reference.</span><a href="https://storage.spec.whatwg.org/#bucket-map">https://storage.spec.whatwg.org/#bucket-map</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-bucket-map">1.1. Creating a bucket</a> <a href="#ref-for-bucket-map①">(2)</a>
    <li><a href="#ref-for-bucket-map②">1.2. Deleting a bucket</a> <a href="#ref-for-bucket-map③">(2)</a>
    <li><a href="#ref-for-bucket-map④">1.3. Enumerating buckets</a>
    <li><a href="#ref-for-bucket-map⑤">2.6. Clear Site Data integration</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-a2029738b4b98c5e9e75d6e1a17c8d5b" class="dfn-panel" data-for="a2029738b4b98c5e9e75d6e1a17c8d5b" id="infopanel-for-a2029738b4b98c5e9e75d6e1a17c8d5b">
   <span id="infopaneltitle-for-a2029738b4b98c5e9e75d6e1a17c8d5b" style="display:none">Info about the 'bucket mode' external reference.</span><a href="https://storage.spec.whatwg.org/#bucket-mode">https://storage.spec.whatwg.org/#bucket-mode</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-bucket-mode">1.1. Creating a bucket</a>
    <li><a href="#ref-for-bucket-mode①">2.1. Persistence</a> <a href="#ref-for-bucket-mode②">(2)</a> <a href="#ref-for-bucket-mode③">(3)</a> <a href="#ref-for-bucket-mode④">(4)</a>
    <li><a href="#ref-for-bucket-mode⑤">2.4. Expiration</a> <a href="#ref-for-bucket-mode⑥">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-0dff98041f99c7938aefcb7c640726e6" class="dfn-panel" data-for="0dff98041f99c7938aefcb7c640726e6" id="infopanel-for-0dff98041f99c7938aefcb7c640726e6">
   <span id="infopaneltitle-for-0dff98041f99c7938aefcb7c640726e6" style="display:none">Info about the 'obtain a local storage bottle map' external reference.</span><a href="https://storage.spec.whatwg.org/#obtain-a-local-storage-bottle-map">https://storage.spec.whatwg.org/#obtain-a-local-storage-bottle-map</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-obtain-a-local-storage-bottle-map">2.5.1. Using Indexed Database</a>
    <li><a href="#ref-for-obtain-a-local-storage-bottle-map①">2.5.2. Using CacheStorage</a>
    <li><a href="#ref-for-obtain-a-local-storage-bottle-map②">2.5.3. Using an Origin Private File System</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-d268e8ee411fa1fd044b01a51a37e88e" class="dfn-panel" data-for="d268e8ee411fa1fd044b01a51a37e88e" id="infopanel-for-d268e8ee411fa1fd044b01a51a37e88e">
   <span id="infopaneltitle-for-d268e8ee411fa1fd044b01a51a37e88e" style="display:none">Info about the 'obtain a local storage shelf' external reference.</span><a href="https://storage.spec.whatwg.org/#obtain-a-local-storage-shelf">https://storage.spec.whatwg.org/#obtain-a-local-storage-shelf</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-obtain-a-local-storage-shelf">1.1. Creating a bucket</a>
    <li><a href="#ref-for-obtain-a-local-storage-shelf①">1.2. Deleting a bucket</a>
    <li><a href="#ref-for-obtain-a-local-storage-shelf②">1.3. Enumerating buckets</a>
    <li><a href="#ref-for-obtain-a-local-storage-shelf③">2.2. Quota</a>
    <li><a href="#ref-for-obtain-a-local-storage-shelf④">2.6. Clear Site Data integration</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-b678ffee39221ea20e1447cfa42542ff" class="dfn-panel" data-for="b678ffee39221ea20e1447cfa42542ff" id="infopanel-for-b678ffee39221ea20e1447cfa42542ff">
   <span id="infopaneltitle-for-b678ffee39221ea20e1447cfa42542ff" style="display:none">Info about the 'quota' external reference.</span><a href="https://storage.spec.whatwg.org/#dom-storageestimate-quota">https://storage.spec.whatwg.org/#dom-storageestimate-quota</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storageestimate-quota">2.2. Quota</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-762beba33f3ad0dfbf19a9c82f4ec357" class="dfn-panel" data-for="762beba33f3ad0dfbf19a9c82f4ec357" id="infopanel-for-762beba33f3ad0dfbf19a9c82f4ec357">
   <span id="infopaneltitle-for-762beba33f3ad0dfbf19a9c82f4ec357" style="display:none">Info about the 'storage bottle' external reference.</span><a href="https://storage.spec.whatwg.org/#storage-bottle">https://storage.spec.whatwg.org/#storage-bottle</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-bottle">2.2. Quota</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dcb2985190de22ddc1fac361fc18de5a" class="dfn-panel" data-for="dcb2985190de22ddc1fac361fc18de5a" id="infopanel-for-dcb2985190de22ddc1fac361fc18de5a">
   <span id="infopaneltitle-for-dcb2985190de22ddc1fac361fc18de5a" style="display:none">Info about the 'storage bucket' external reference.</span><a href="https://storage.spec.whatwg.org/#storage-bucket">https://storage.spec.whatwg.org/#storage-bucket</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-bucket">1.1. Creating a bucket</a> <a href="#ref-for-storage-bucket①">(2)</a>
    <li><a href="#ref-for-storage-bucket②">2. The StorageBucket interface</a> <a href="#ref-for-storage-bucket③">(2)</a> <a href="#ref-for-storage-bucket④">(3)</a>
    <li><a href="#ref-for-storage-bucket⑤">2.1. Persistence</a> <a href="#ref-for-storage-bucket⑥">(2)</a>
    <li><a href="#ref-for-storage-bucket⑦">2.2. Quota</a> <a href="#ref-for-storage-bucket⑧">(2)</a> <a href="#ref-for-storage-bucket⑨">(3)</a>
    <li><a href="#ref-for-storage-bucket①⓪">2.3. Durability</a> <a href="#ref-for-storage-bucket①①">(2)</a>
    <li><a href="#ref-for-storage-bucket①②">2.4. Expiration</a> <a href="#ref-for-storage-bucket①③">(2)</a> <a href="#ref-for-storage-bucket①④">(3)</a>
    <li><a href="#ref-for-storage-bucket①⑤">2.5.1. Using Indexed Database</a>
    <li><a href="#ref-for-storage-bucket①⑥">2.5.2. Using CacheStorage</a>
    <li><a href="#ref-for-storage-bucket①⑦">2.5.3. Using an Origin Private File System</a>
    <li><a href="#ref-for-storage-bucket①⑧">2.6. Clear Site Data integration</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-02d1b826437e77c1f657e442ab4b6d22" class="dfn-panel" data-for="02d1b826437e77c1f657e442ab4b6d22" id="infopanel-for-02d1b826437e77c1f657e442ab4b6d22">
   <span id="infopaneltitle-for-02d1b826437e77c1f657e442ab4b6d22" style="display:none">Info about the 'storage quota' external reference.</span><a href="https://storage.spec.whatwg.org/#storage-quota">https://storage.spec.whatwg.org/#storage-quota</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-quota">2.2. Quota</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-4ae96685c778dd1d6d81ae3c132bce0e" class="dfn-panel" data-for="4ae96685c778dd1d6d81ae3c132bce0e" id="infopanel-for-4ae96685c778dd1d6d81ae3c132bce0e">
   <span id="infopaneltitle-for-4ae96685c778dd1d6d81ae3c132bce0e" style="display:none">Info about the 'storage shelf' external reference.</span><a href="https://storage.spec.whatwg.org/#storage-shelf">https://storage.spec.whatwg.org/#storage-shelf</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-shelf">2.2. Quota</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-3a8c47fee15b74d34ba67010db288d54" class="dfn-panel" data-for="3a8c47fee15b74d34ba67010db288d54" id="infopanel-for-3a8c47fee15b74d34ba67010db288d54">
   <span id="infopaneltitle-for-3a8c47fee15b74d34ba67010db288d54" style="display:none">Info about the 'usage' external reference.</span><a href="https://storage.spec.whatwg.org/#dom-storageestimate-usage">https://storage.spec.whatwg.org/#dom-storageestimate-usage</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storageestimate-usage">2.2. Quota</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-d0f238a61de9310f1738a214749fab18" class="dfn-panel" data-for="d0f238a61de9310f1738a214749fab18" id="infopanel-for-d0f238a61de9310f1738a214749fab18">
   <span id="infopaneltitle-for-d0f238a61de9310f1738a214749fab18" style="display:none">Info about the 'DOMString' external reference.</span><a href="https://webidl.spec.whatwg.org/#idl-DOMString">https://webidl.spec.whatwg.org/#idl-DOMString</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-DOMString">1. The StorageBucketManager interface</a> <a href="#ref-for-idl-DOMString①">(2)</a> <a href="#ref-for-idl-DOMString②">(3)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dde049eb112f043fc45407ec0d4cb457" class="dfn-panel" data-for="dde049eb112f043fc45407ec0d4cb457" id="infopanel-for-dde049eb112f043fc45407ec0d4cb457">
   <span id="infopaneltitle-for-dde049eb112f043fc45407ec0d4cb457" style="display:none">Info about the 'Exposed' external reference.</span><a href="https://webidl.spec.whatwg.org/#Exposed">https://webidl.spec.whatwg.org/#Exposed</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-Exposed">1. The StorageBucketManager interface</a>
    <li><a href="#ref-for-Exposed①">2. The StorageBucket interface</a> <a href="#ref-for-Exposed②">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-2047de0127550ba57998a1f13da8412d" class="dfn-panel" data-for="2047de0127550ba57998a1f13da8412d" id="infopanel-for-2047de0127550ba57998a1f13da8412d">
   <span id="infopaneltitle-for-2047de0127550ba57998a1f13da8412d" style="display:none">Info about the 'InvalidCharacterError' external reference.</span><a href="https://webidl.spec.whatwg.org/#invalidcharactererror">https://webidl.spec.whatwg.org/#invalidcharactererror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-invalidcharactererror">1.2. Deleting a bucket</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-e2a06375a2fb70c61a8b4cd0abe9d4f1" class="dfn-panel" data-for="e2a06375a2fb70c61a8b4cd0abe9d4f1" id="infopanel-for-e2a06375a2fb70c61a8b4cd0abe9d4f1">
   <span id="infopaneltitle-for-e2a06375a2fb70c61a8b4cd0abe9d4f1" style="display:none">Info about the 'InvalidStateError' external reference.</span><a href="https://webidl.spec.whatwg.org/#invalidstateerror">https://webidl.spec.whatwg.org/#invalidstateerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-invalidstateerror">2.1. Persistence</a> <a href="#ref-for-invalidstateerror①">(2)</a>
    <li><a href="#ref-for-invalidstateerror②">2.2. Quota</a>
    <li><a href="#ref-for-invalidstateerror③">2.3. Durability</a>
    <li><a href="#ref-for-invalidstateerror④">2.4. Expiration</a> <a href="#ref-for-invalidstateerror⑤">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-93669c631ec1ef8e696b4c083bdbe12c" class="dfn-panel" data-for="93669c631ec1ef8e696b4c083bdbe12c" id="infopanel-for-93669c631ec1ef8e696b4c083bdbe12c">
   <span id="infopaneltitle-for-93669c631ec1ef8e696b4c083bdbe12c" style="display:none">Info about the 'Promise' external reference.</span><a href="https://webidl.spec.whatwg.org/#idl-promise">https://webidl.spec.whatwg.org/#idl-promise</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-promise">1. The StorageBucketManager interface</a> <a href="#ref-for-idl-promise①">(2)</a> <a href="#ref-for-idl-promise②">(3)</a>
    <li><a href="#ref-for-idl-promise③">2. The StorageBucket interface</a> <a href="#ref-for-idl-promise④">(2)</a> <a href="#ref-for-idl-promise⑤">(3)</a> <a href="#ref-for-idl-promise⑥">(4)</a> <a href="#ref-for-idl-promise⑦">(5)</a> <a href="#ref-for-idl-promise⑧">(6)</a> <a href="#ref-for-idl-promise⑨">(7)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-f572762cd4679aeacd36722d99d2b741" class="dfn-panel" data-for="f572762cd4679aeacd36722d99d2b741" id="infopanel-for-f572762cd4679aeacd36722d99d2b741">
   <span id="infopaneltitle-for-f572762cd4679aeacd36722d99d2b741" style="display:none">Info about the 'SameObject' external reference.</span><a href="https://webidl.spec.whatwg.org/#SameObject">https://webidl.spec.whatwg.org/#SameObject</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-SameObject">1. The StorageBucketManager interface</a>
    <li><a href="#ref-for-SameObject①">2. The StorageBucket interface</a> <a href="#ref-for-SameObject②">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-cdf224ec60dc3b08449a2fbdf3a90406" class="dfn-panel" data-for="cdf224ec60dc3b08449a2fbdf3a90406" id="infopanel-for-cdf224ec60dc3b08449a2fbdf3a90406">
   <span id="infopaneltitle-for-cdf224ec60dc3b08449a2fbdf3a90406" style="display:none">Info about the 'SecureContext' external reference.</span><a href="https://webidl.spec.whatwg.org/#SecureContext">https://webidl.spec.whatwg.org/#SecureContext</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-SecureContext">1. The StorageBucketManager interface</a> <a href="#ref-for-SecureContext①">(2)</a>
    <li><a href="#ref-for-SecureContext②">2. The StorageBucket interface</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-3f9c3eac015894a734faa8068fd8c2a1" class="dfn-panel" data-for="3f9c3eac015894a734faa8068fd8c2a1" id="infopanel-for-3f9c3eac015894a734faa8068fd8c2a1">
   <span id="infopaneltitle-for-3f9c3eac015894a734faa8068fd8c2a1" style="display:none">Info about the 'TypeError' external reference.</span><a href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror">https://webidl.spec.whatwg.org/#exceptiondef-typeerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-typeerror">1.1. Creating a bucket</a> <a href="#ref-for-exceptiondef-typeerror①">(2)</a> <a href="#ref-for-exceptiondef-typeerror②">(3)</a>
    <li><a href="#ref-for-exceptiondef-typeerror③">1.2. Deleting a bucket</a> <a href="#ref-for-exceptiondef-typeerror④">(2)</a>
    <li><a href="#ref-for-exceptiondef-typeerror⑤">1.3. Enumerating buckets</a>
    <li><a href="#ref-for-exceptiondef-typeerror⑥">2.2. Quota</a>
    <li><a href="#ref-for-exceptiondef-typeerror⑦">2.6. Clear Site Data integration</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-bbe33fc7ac016834e4aaddbfd1b084a1" class="dfn-panel" data-for="bbe33fc7ac016834e4aaddbfd1b084a1" id="infopanel-for-bbe33fc7ac016834e4aaddbfd1b084a1">
   <span id="infopaneltitle-for-bbe33fc7ac016834e4aaddbfd1b084a1" style="display:none">Info about the 'a new promise' external reference.</span><a href="https://webidl.spec.whatwg.org/#a-new-promise">https://webidl.spec.whatwg.org/#a-new-promise</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-a-new-promise">1.2. Deleting a bucket</a>
    <li><a href="#ref-for-a-new-promise①">1.3. Enumerating buckets</a>
    <li><a href="#ref-for-a-new-promise②">2.1. Persistence</a> <a href="#ref-for-a-new-promise③">(2)</a>
    <li><a href="#ref-for-a-new-promise④">2.2. Quota</a>
    <li><a href="#ref-for-a-new-promise⑤">2.3. Durability</a>
    <li><a href="#ref-for-a-new-promise⑥">2.4. Expiration</a> <a href="#ref-for-a-new-promise⑦">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-cf8339c4a39778ea039900ab8a77d2fe" class="dfn-panel" data-for="cf8339c4a39778ea039900ab8a77d2fe" id="infopanel-for-cf8339c4a39778ea039900ab8a77d2fe">
   <span id="infopaneltitle-for-cf8339c4a39778ea039900ab8a77d2fe" style="display:none">Info about the 'a promise rejected with' external reference.</span><a href="https://webidl.spec.whatwg.org/#a-promise-rejected-with">https://webidl.spec.whatwg.org/#a-promise-rejected-with</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-a-promise-rejected-with">1.1. Creating a bucket</a> <a href="#ref-for-a-promise-rejected-with①">(2)</a> <a href="#ref-for-a-promise-rejected-with②">(3)</a>
    <li><a href="#ref-for-a-promise-rejected-with③">1.2. Deleting a bucket</a>
    <li><a href="#ref-for-a-promise-rejected-with④">1.3. Enumerating buckets</a>
    <li><a href="#ref-for-a-promise-rejected-with⑤">2.2. Quota</a> <a href="#ref-for-a-promise-rejected-with⑥">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-cb7ce63b39eb2128b9c2cc2cf413299f" class="dfn-panel" data-for="cb7ce63b39eb2128b9c2cc2cf413299f" id="infopanel-for-cb7ce63b39eb2128b9c2cc2cf413299f">
   <span id="infopaneltitle-for-cb7ce63b39eb2128b9c2cc2cf413299f" style="display:none">Info about the 'a promise resolved with' external reference.</span><a href="https://webidl.spec.whatwg.org/#a-promise-resolved-with">https://webidl.spec.whatwg.org/#a-promise-resolved-with</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-a-promise-resolved-with">1.1. Creating a bucket</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-f8062b07e25ed0281f5cbfb9a54070b4" class="dfn-panel" data-for="f8062b07e25ed0281f5cbfb9a54070b4" id="infopanel-for-f8062b07e25ed0281f5cbfb9a54070b4">
   <span id="infopaneltitle-for-f8062b07e25ed0281f5cbfb9a54070b4" style="display:none">Info about the 'boolean' external reference.</span><a href="https://webidl.spec.whatwg.org/#idl-boolean">https://webidl.spec.whatwg.org/#idl-boolean</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-boolean">1. The StorageBucketManager interface</a>
    <li><a href="#ref-for-idl-boolean①">2. The StorageBucket interface</a> <a href="#ref-for-idl-boolean②">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-f7204c0306e7ffcb24c31adf6e629e1d" class="dfn-panel" data-for="f7204c0306e7ffcb24c31adf6e629e1d" id="infopanel-for-f7204c0306e7ffcb24c31adf6e629e1d">
   <span id="infopaneltitle-for-f7204c0306e7ffcb24c31adf6e629e1d" style="display:none">Info about the 'reject' external reference.</span><a href="https://webidl.spec.whatwg.org/#reject">https://webidl.spec.whatwg.org/#reject</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reject">1.2. Deleting a bucket</a> <a href="#ref-for-reject①">(2)</a>
    <li><a href="#ref-for-reject②">2.1. Persistence</a> <a href="#ref-for-reject③">(2)</a>
    <li><a href="#ref-for-reject④">2.3. Durability</a>
    <li><a href="#ref-for-reject⑤">2.4. Expiration</a> <a href="#ref-for-reject⑥">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-f4f973f92274819781816b033aea1f11" class="dfn-panel" data-for="f4f973f92274819781816b033aea1f11" id="infopanel-for-f4f973f92274819781816b033aea1f11">
   <span id="infopaneltitle-for-f4f973f92274819781816b033aea1f11" style="display:none">Info about the 'resolve' external reference.</span><a href="https://webidl.spec.whatwg.org/#resolve">https://webidl.spec.whatwg.org/#resolve</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-resolve">1.2. Deleting a bucket</a>
    <li><a href="#ref-for-resolve①">1.3. Enumerating buckets</a>
    <li><a href="#ref-for-resolve②">2.1. Persistence</a> <a href="#ref-for-resolve③">(2)</a> <a href="#ref-for-resolve④">(3)</a> <a href="#ref-for-resolve⑤">(4)</a> <a href="#ref-for-resolve⑥">(5)</a>
    <li><a href="#ref-for-resolve⑦">2.2. Quota</a>
    <li><a href="#ref-for-resolve⑧">2.3. Durability</a>
    <li><a href="#ref-for-resolve⑨">2.4. Expiration</a> <a href="#ref-for-resolve①⓪">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-38ab7db52e46bed36993204c29f67202" class="dfn-panel" data-for="38ab7db52e46bed36993204c29f67202" id="infopanel-for-38ab7db52e46bed36993204c29f67202">
   <span id="infopaneltitle-for-38ab7db52e46bed36993204c29f67202" style="display:none">Info about the 'sequence' external reference.</span><a href="https://webidl.spec.whatwg.org/#idl-sequence">https://webidl.spec.whatwg.org/#idl-sequence</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-sequence">1. The StorageBucketManager interface</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-be0933df03cd63338f98de217c4158c7" class="dfn-panel" data-for="be0933df03cd63338f98de217c4158c7" id="infopanel-for-be0933df03cd63338f98de217c4158c7">
   <span id="infopaneltitle-for-be0933df03cd63338f98de217c4158c7" style="display:none">Info about the 'this' external reference.</span><a href="https://webidl.spec.whatwg.org/#this">https://webidl.spec.whatwg.org/#this</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-this">1. The StorageBucketManager interface</a>
    <li><a href="#ref-for-this①">1.1. Creating a bucket</a>
    <li><a href="#ref-for-this②">1.2. Deleting a bucket</a>
    <li><a href="#ref-for-this③">2.1. Persistence</a> <a href="#ref-for-this④">(2)</a> <a href="#ref-for-this⑤">(3)</a>
    <li><a href="#ref-for-this⑥">2.2. Quota</a> <a href="#ref-for-this⑦">(2)</a>
    <li><a href="#ref-for-this⑧">2.3. Durability</a>
    <li><a href="#ref-for-this⑨">2.4. Expiration</a> <a href="#ref-for-this①⓪">(2)</a>
    <li><a href="#ref-for-this①①">2.5.1. Using Indexed Database</a> <a href="#ref-for-this①②">(2)</a> <a href="#ref-for-this①③">(3)</a> <a href="#ref-for-this①④">(4)</a>
    <li><a href="#ref-for-this①⑤">2.5.2. Using CacheStorage</a> <a href="#ref-for-this①⑥">(2)</a> <a href="#ref-for-this①⑦">(3)</a> <a href="#ref-for-this①⑧">(4)</a>
    <li><a href="#ref-for-this①⑨">2.5.3. Using an Origin Private File System</a>
    <li><a href="#ref-for-this②⓪">2.6. Clear Site Data integration</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-2ffe113543b75964c47c7e6248fef5eb" class="dfn-panel" data-for="2ffe113543b75964c47c7e6248fef5eb" id="infopanel-for-2ffe113543b75964c47c7e6248fef5eb">
   <span id="infopaneltitle-for-2ffe113543b75964c47c7e6248fef5eb" style="display:none">Info about the 'throw' external reference.</span><a href="https://webidl.spec.whatwg.org/#dfn-throw">https://webidl.spec.whatwg.org/#dfn-throw</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-throw">2.6. Clear Site Data integration</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-cee863f1f2ec91066cfb7f5d309d59dc" class="dfn-panel" data-for="cee863f1f2ec91066cfb7f5d309d59dc" id="infopanel-for-cee863f1f2ec91066cfb7f5d309d59dc">
   <span id="infopaneltitle-for-cee863f1f2ec91066cfb7f5d309d59dc" style="display:none">Info about the 'undefined' external reference.</span><a href="https://webidl.spec.whatwg.org/#idl-undefined">https://webidl.spec.whatwg.org/#idl-undefined</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-undefined">1. The StorageBucketManager interface</a>
    <li><a href="#ref-for-idl-undefined①">2. The StorageBucket interface</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-db891cb1cc28e2bf626982240ec36b2a" class="dfn-panel" data-for="db891cb1cc28e2bf626982240ec36b2a" id="infopanel-for-db891cb1cc28e2bf626982240ec36b2a">
   <span id="infopaneltitle-for-db891cb1cc28e2bf626982240ec36b2a" style="display:none">Info about the 'unsigned long long' external reference.</span><a href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long">https://webidl.spec.whatwg.org/#idl-unsigned-long-long</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-unsigned-long-long">1. The StorageBucketManager interface</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[FS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="9d8e130057dd59bc8cab4f414e390ebf">FileSystemDirectoryHandle</span>
     <li><span class="dfn-paneled" id="eee674a7b8f683464c60fafdbfa9e8ab">getDirectory()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HR-TIME-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="0527034ee7070fda15ffa50c34dbbc63">DOMHighResTimeStamp</span>
     <li><span class="dfn-paneled" id="1f78bca61233b6a6957119204c181632">current wall time</span>
     <li><span class="dfn-paneled" id="a33f352de1a9eb5d29cfa3005d40d072">moment</span>
     <li><span class="dfn-paneled" id="c6a6e18a0bfb0f6727343f416cd90c01">unix epoch</span>
     <li><span class="dfn-paneled" id="9ce1d97c81991af84a4cfb8251a89c4e">wall clock</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="3c82b19be23a00eb4bb6896ec20cd7aa">Navigator</span>
     <li><span class="dfn-paneled" id="f9c60134d1166b5cbe490d111703a3b0">WorkerNavigator</span>
     <li><span class="dfn-paneled" id="d815dc723d8b4fe4b1166e2013ec62b7">environment settings object</span>
     <li><span class="dfn-paneled" id="3a2763fcaa6bc82693554cf36780c0dd">in parallel</span>
     <li><span class="dfn-paneled" id="a95cc6f0be910557a60537e0256920b2">origin</span>
     <li><span class="dfn-paneled" id="da7ed5f190c4eedd375552d6f7876301">queue a task</span>
     <li><span class="dfn-paneled" id="bfb9cb6617f81a424ab20212af73bae3">relevant settings object</span>
    </ul>
   <li>
    <a data-link-type="biblio">[IndexedDB-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="7ccd3fe71bd97702d40f89879f536d5b">"default"</span>
     <li><span class="dfn-paneled" id="96ffc2f5b033479ebcbe053477983e7a">"relaxed"</span>
     <li><span class="dfn-paneled" id="732cc0cf0e4c9d476383d238a7a5e81d">"strict"</span>
     <li><span class="dfn-paneled" id="56e4bb6f5c5237eda504da1d4b54449a">IDBFactory</span>
     <li><span class="dfn-paneled" id="40ee6466c7a60cfbaedb2014bc31a891">IDBTransaction</span>
     <li><span class="dfn-paneled" id="6dc0dc2bb5ff87160fa92c9b2bd6c0ea">durability hint</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="fcfc8b0ed220faa237969aed00e2586d">append</span>
     <li><span class="dfn-paneled" id="c2f5d9b1ced7c40f62782a928198d3a8">ascii digit</span>
     <li><span class="dfn-paneled" id="f2b877833382750f00e188f032456059">ascii lower alpha</span>
     <li><span class="dfn-paneled" id="4103741029595e9e13c67dab91d1e3bd">code point</span>
     <li><span class="dfn-paneled" id="0c5b8810162108ca42f42ac154072480">code point length</span>
     <li><span class="dfn-paneled" id="ea6f005773fd4f991ff2d63239f90613">code unit substring by positions</span>
     <li><span class="dfn-paneled" id="fd74d8159933c4a74d0b23390bed43e3">implementation-defined</span>
     <li><span class="dfn-paneled" id="c38550431b74fa21f9dd8b8680f1105c">key</span>
     <li><span class="dfn-paneled" id="fafd38d2108e357bcc9a6fd7f3cd04a7">list</span>
     <li><span class="dfn-paneled" id="2d700262fcde3097fbf89ef2496f1f0d">starts with</span>
     <li><span class="dfn-paneled" id="decbbd3ee5a73b54e8e8996ce1fddbbc">tuple</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PERMISSIONS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="7b01ad8c5e8d011946cb54633b172084">getting the current permission state</span>
     <li><span class="dfn-paneled" id="180d5479814a4ae3b599e6a1c4e11751">granted</span>
     <li><span class="dfn-paneled" id="7761fb406c4d8cdb685b810244d5e5a6">requesting permission to use</span>
    </ul>
   <li>
    <a data-link-type="biblio">[Service-Workers]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="58aed90a8ddd8f180862c716af7d25c6">CacheStorage</span>
     <li><span class="dfn-paneled" id="0b49a59f74c17df3b05704e7d7552584">relevant name to cache map</span>
    </ul>
   <li>
    <a data-link-type="biblio">[Storage]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="907504f20c39c9094e157d0c50797ed3">StorageEstimate</span>
     <li><span class="dfn-paneled" id="8c2b9baa2bcf87b7479bc5d28f0c925a">bottle map</span>
     <li><span class="dfn-paneled" id="7bed712fb187b01e9a5fb930d421c3c9">bucket map</span>
     <li><span class="dfn-paneled" id="a2029738b4b98c5e9e75d6e1a17c8d5b">bucket mode</span>
     <li><span class="dfn-paneled" id="0dff98041f99c7938aefcb7c640726e6">obtain a local storage bottle map</span>
     <li><span class="dfn-paneled" id="d268e8ee411fa1fd044b01a51a37e88e">obtain a local storage shelf</span>
     <li><span class="dfn-paneled" id="b678ffee39221ea20e1447cfa42542ff">quota</span>
     <li><span class="dfn-paneled" id="762beba33f3ad0dfbf19a9c82f4ec357">storage bottle</span>
     <li><span class="dfn-paneled" id="dcb2985190de22ddc1fac361fc18de5a">storage bucket</span>
     <li><span class="dfn-paneled" id="02d1b826437e77c1f657e442ab4b6d22">storage quota</span>
     <li><span class="dfn-paneled" id="4ae96685c778dd1d6d81ae3c132bce0e">storage shelf</span>
     <li><span class="dfn-paneled" id="3a8c47fee15b74d34ba67010db288d54">usage</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d0f238a61de9310f1738a214749fab18">DOMString</span>
     <li><span class="dfn-paneled" id="dde049eb112f043fc45407ec0d4cb457">Exposed</span>
     <li><span class="dfn-paneled" id="2047de0127550ba57998a1f13da8412d">InvalidCharacterError</span>
     <li><span class="dfn-paneled" id="e2a06375a2fb70c61a8b4cd0abe9d4f1">InvalidStateError</span>
     <li><span class="dfn-paneled" id="93669c631ec1ef8e696b4c083bdbe12c">Promise</span>
     <li><span class="dfn-paneled" id="f572762cd4679aeacd36722d99d2b741">SameObject</span>
     <li><span class="dfn-paneled" id="cdf224ec60dc3b08449a2fbdf3a90406">SecureContext</span>
     <li><span class="dfn-paneled" id="3f9c3eac015894a734faa8068fd8c2a1">TypeError</span>
     <li><span class="dfn-paneled" id="bbe33fc7ac016834e4aaddbfd1b084a1">a new promise</span>
     <li><span class="dfn-paneled" id="cf8339c4a39778ea039900ab8a77d2fe">a promise rejected with</span>
     <li><span class="dfn-paneled" id="cb7ce63b39eb2128b9c2cc2cf413299f">a promise resolved with</span>
     <li><span class="dfn-paneled" id="f8062b07e25ed0281f5cbfb9a54070b4">boolean</span>
     <li><span class="dfn-paneled" id="f7204c0306e7ffcb24c31adf6e629e1d">reject</span>
     <li><span class="dfn-paneled" id="f4f973f92274819781816b033aea1f11">resolve</span>
     <li><span class="dfn-paneled" id="38ab7db52e46bed36993204c29f67202">sequence</span>
     <li><span class="dfn-paneled" id="be0933df03cd63338f98de217c4158c7">this</span>
     <li><span class="dfn-paneled" id="2ffe113543b75964c47c7e6248fef5eb">throw</span>
     <li><span class="dfn-paneled" id="cee863f1f2ec91066cfb7f5d309d59dc">undefined</span>
     <li><span class="dfn-paneled" id="db891cb1cc28e2bf626982240ec36b2a">unsigned long long</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-clear-site-data">[CLEAR-SITE-DATA]
   <dd>Mike West. <a href="https://w3c.github.io/webappsec-clear-site-data/"><cite>Clear Site Data</cite></a>. URL: <a href="https://w3c.github.io/webappsec-clear-site-data/">https://w3c.github.io/webappsec-clear-site-data/</a>
   <dt id="biblio-fs">[FS]
   <dd>Austin Sullivan. <a href="https://fs.spec.whatwg.org/"><cite>File System Standard</cite></a>. Living Standard. URL: <a href="https://fs.spec.whatwg.org/">https://fs.spec.whatwg.org/</a>
   <dt id="biblio-hr-time-3">[HR-TIME-3]
   <dd>Yoav Weiss. <a href="https://w3c.github.io/hr-time/"><cite>High Resolution Time</cite></a>. URL: <a href="https://w3c.github.io/hr-time/">https://w3c.github.io/hr-time/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-indexeddb-3">[IndexedDB-3]
   <dd>Ali Alabbas; Joshua Bell. <a href="https://w3c.github.io/IndexedDB/"><cite>Indexed Database API 3.0</cite></a>. URL: <a href="https://w3c.github.io/IndexedDB/">https://w3c.github.io/IndexedDB/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-permissions">[PERMISSIONS]
   <dd>Marcos Caceres; Mike Taylor. <a href="https://w3c.github.io/permissions/"><cite>Permissions</cite></a>. URL: <a href="https://w3c.github.io/permissions/">https://w3c.github.io/permissions/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-service-workers">[Service-Workers]
   <dd>Jake Archibald; Marijn Kruisselbrink. <a href="https://w3c.github.io/ServiceWorker/"><cite>Service Workers</cite></a>. URL: <a href="https://w3c.github.io/ServiceWorker/">https://w3c.github.io/ServiceWorker/</a>
   <dt id="biblio-storage">[Storage]
   <dd>Anne van Kesteren. <a href="https://storage.spec.whatwg.org/"><cite>Storage Standard</cite></a>. Living Standard. URL: <a href="https://storage.spec.whatwg.org/">https://storage.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <c- b>mixin</c-> <a href="#navigatorstoragebuckets"><code><c- g>NavigatorStorageBuckets</c-></code></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#storagebucketmanager"><c- n>StorageBucketManager</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="StorageBucketManager" href="#dom-navigatorstoragebuckets-storagebuckets"><c- g>storageBuckets</c-></a>;
};
<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator"><c- n>Navigator</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="#navigatorstoragebuckets"><c- n>NavigatorStorageBuckets</c-></a>;
<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/workers.html#workernavigator"><c- n>WorkerNavigator</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="#navigatorstoragebuckets"><c- n>NavigatorStorageBuckets</c-></a>;

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->),
 <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <a href="#storagebucketmanager"><code><c- g>StorageBucketManager</c-></code></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#storagebucket"><c- n>StorageBucket</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucketmanager-open"><c- g>open</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-storagebucketmanager-open-name-options-name"><code><c- g>name</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-storagebucketoptions"><c- n>StorageBucketOptions</c-></a> <a href="#dom-storagebucketmanager-open-name-options-options"><code><c- g>options</c-></code></a> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-storagebucketmanager-keys"><c- g>keys</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucketmanager-delete"><c- g>delete</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-storagebucketmanager-delete-name-name"><code><c- g>name</c-></code></a>);
};

<c- b>enum</c-> <a href="#enumdef-storagebucketdurability"><code><c- g>StorageBucketDurability</c-></code></a> {
  <a href="#dom-storagebucketdurability-strict"><code><c- s>"strict"</c-></code></a>,
  <a href="#dom-storagebucketdurability-relaxed"><code><c- s>"relaxed"</c-></code></a>
};

<c- b>dictionary</c-> <a href="#dictdef-storagebucketoptions"><code><c- g>StorageBucketOptions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a>? <a data-default="null" data-type="boolean? " href="#dom-storagebucketoptions-persisted"><code><c- g>persisted</c-></code></a> = <c- b>null</c->;
  <a data-link-type="idl-name" href="#enumdef-storagebucketdurability"><c- n>StorageBucketDurability</c-></a>? <a data-default="null" data-type="StorageBucketDurability? " href="#dom-storagebucketoptions-durability"><code><c- g>durability</c-></code></a> = <c- b>null</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a>? <a data-default="null" data-type="unsigned long long? " href="#dom-storagebucketoptions-quota"><code><c- g>quota</c-></code></a> = <c- b>null</c->;
  <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#dom-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a>? <a data-default="null" data-type="DOMHighResTimeStamp? " href="#dom-storagebucketoptions-expires"><code><c- g>expires</c-></code></a> = <c- b>null</c->;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->),
 <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <a href="#storagebucket"><code><c- g>StorageBucket</c-></code></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucket-persist"><c- g>persist</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucket-persisted"><c- g>persisted</c-></a>();

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://storage.spec.whatwg.org/#dictdef-storageestimate"><c- n>StorageEstimate</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucket-estimate"><c- g>estimate</c-></a>();

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-storagebucketdurability"><c- n>StorageBucketDurability</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucket-durability"><c- g>durability</c-></a>();

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucket-setexpires"><c- g>setExpires</c-></a>(<a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#dom-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a href="#dom-storagebucket-setexpires-expires-expires"><code><c- g>expires</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#dom-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a>?> <a class="idl-code" data-link-type="method" href="#dom-storagebucket-expires"><c- g>expires</c-></a>();

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/IndexedDB/#idbfactory"><c- n>IDBFactory</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="IDBFactory" href="#dom-storagebucket-indexeddb"><c- g>indexedDB</c-></a>;

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/ServiceWorker/#cachestorage"><c- n>CacheStorage</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CacheStorage" href="#dom-storagebucket-caches"><c- g>caches</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://fs.spec.whatwg.org/#filesystemdirectoryhandle"><c- n>FileSystemDirectoryHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagebucket-getdirectory"><c- g>getDirectory</c-></a>();
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> <a data-link-type="biblio" href="#biblio-indexeddb-3" title="Indexed Database API 3.0">[IndexedDB-3]</a> needs to define how deletion occurs when data is evicted by quota. <a class="issue-return" href="#issue-4958726d" title="Jump to section">↵</a></div>
   <div class="issue"> <a data-link-type="biblio" href="#biblio-fs" title="File System Standard">[FS]</a> needs to define how deletion occurs for Origin Private File System when data is evicted by quota. <a class="issue-return" href="#issue-c5f1de1a" title="Jump to section">↵</a></div>
   <div class="issue"> <a data-link-type="biblio" href="#biblio-service-workers" title="Service Workers">[Service-Workers]</a> needs to define how deletion occurs for CacheStorage and Service Workers when data is evicted by quota. <a class="issue-return" href="#issue-2e7a487e" title="Jump to section">↵</a></div>
   <div class="issue"> Merge with <a href="https://storage.spec.whatwg.org/#buckets"><cite>Storage</cite> § 4.5 Storage buckets</a> which already defines <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-mode">bucket mode</a>. <a class="issue-return" href="#issue-3271f8e6" title="Jump to section">↵</a></div>
   <div class="issue"> <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/IndexedDB/#idbfactory">IDBFactory</a></code> methods need to take a storage bottle map rather than a storageKey. <a class="issue-return" href="#issue-4f9abb58" title="Jump to section">↵</a></div>
   <div class="issue"> <a data-link-type="biblio" href="#biblio-storage" title="Storage Standard">[Storage]</a> needs to define helpers to retrieve the bottle map for a given (non-default) bucket. <a class="issue-return" href="#issue-0d9f1d43" title="Jump to section">↵</a></div>
   <div class="issue"> <a data-link-type="biblio" href="#biblio-fs" title="File System Standard">[FS]</a> needs to define a helper to retrieve an OPFS given a bottle map. <a class="issue-return" href="#issue-25ffaa8c" title="Jump to section">↵</a></div>
   <div class="issue"> Update <a href="https://w3c.github.io/webappsec-clear-site-data/#header"><cite>Clear Site Data</cite> § 3.1 The Clear-Site-Data HTTP Response Header Field</a>. <a class="issue-return" href="#issue-99cfd987" title="Jump to section">↵</a></div>
   <div class="issue"> add the steps below to the algorithm in <a href="https://w3c.github.io/webappsec-clear-site-data/#parsing"><cite>Clear Site Data</cite> § 4.1 Parsing</a>. <a class="issue-return" href="#issue-99223a67" title="Jump to section">↵</a></div>
   <div class="issue"> add the steps below to the algorithm in <a href="https://w3c.github.io/webappsec-clear-site-data/#clear-response"><cite>Clear Site Data</cite> § 4.2 Clear data for response</a>. <a class="issue-return" href="#issue-99223a67①" title="Jump to section">↵</a></div>
  </div>
  <aside aria-labelledby="infopaneltitle-for-navigatorstoragebuckets" class="dfn-panel" data-for="navigatorstoragebuckets" id="infopanel-for-navigatorstoragebuckets">
   <span id="infopaneltitle-for-navigatorstoragebuckets" style="display:none">Info about the 'NavigatorStorageBuckets' definition.</span><b><a href="#navigatorstoragebuckets">#navigatorstoragebuckets</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigatorstoragebuckets">1. The StorageBucketManager interface</a> <a href="#ref-for-navigatorstoragebuckets①">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-navigatorstoragebuckets-storagebuckets" class="dfn-panel" data-for="dom-navigatorstoragebuckets-storagebuckets" id="infopanel-for-dom-navigatorstoragebuckets-storagebuckets">
   <span id="infopaneltitle-for-dom-navigatorstoragebuckets-storagebuckets" style="display:none">Info about the 'storageBuckets' definition.</span><b><a href="#dom-navigatorstoragebuckets-storagebuckets">#dom-navigatorstoragebuckets-storagebuckets</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-navigatorstoragebuckets-storagebuckets">1. The StorageBucketManager interface</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-storagebucketmanager" class="dfn-panel" data-for="storagebucketmanager" id="infopanel-for-storagebucketmanager">
   <span id="infopaneltitle-for-storagebucketmanager" style="display:none">Info about the 'StorageBucketManager' definition.</span><b><a href="#storagebucketmanager">#storagebucketmanager</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storagebucketmanager">1. The StorageBucketManager interface</a> <a href="#ref-for-storagebucketmanager①">(2)</a> <a href="#ref-for-storagebucketmanager②">(3)</a> <a href="#ref-for-storagebucketmanager③">(4)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-enumdef-storagebucketdurability" class="dfn-panel" data-for="enumdef-storagebucketdurability" id="infopanel-for-enumdef-storagebucketdurability">
   <span id="infopaneltitle-for-enumdef-storagebucketdurability" style="display:none">Info about the 'StorageBucketDurability' definition.</span><b><a href="#enumdef-storagebucketdurability">#enumdef-storagebucketdurability</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-storagebucketdurability">1. The StorageBucketManager interface</a>
    <li><a href="#ref-for-enumdef-storagebucketdurability①">2. The StorageBucket interface</a>
    <li><a href="#ref-for-enumdef-storagebucketdurability②">2.3. Durability</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucketdurability-strict" class="dfn-panel" data-for="dom-storagebucketdurability-strict" id="infopanel-for-dom-storagebucketdurability-strict">
   <span id="infopaneltitle-for-dom-storagebucketdurability-strict" style="display:none">Info about the '"strict"' definition.</span><b><a href="#dom-storagebucketdurability-strict">#dom-storagebucketdurability-strict</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucketdurability-strict">2.3. Durability</a> <a href="#ref-for-dom-storagebucketdurability-strict①">(2)</a>
    <li><a href="#ref-for-dom-storagebucketdurability-strict②">2.5.1. Using Indexed Database</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucketdurability-relaxed" class="dfn-panel" data-for="dom-storagebucketdurability-relaxed" id="infopanel-for-dom-storagebucketdurability-relaxed">
   <span id="infopaneltitle-for-dom-storagebucketdurability-relaxed" style="display:none">Info about the '"relaxed"' definition.</span><b><a href="#dom-storagebucketdurability-relaxed">#dom-storagebucketdurability-relaxed</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucketdurability-relaxed">2.3. Durability</a> <a href="#ref-for-dom-storagebucketdurability-relaxed①">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dictdef-storagebucketoptions" class="dfn-panel" data-for="dictdef-storagebucketoptions" id="infopanel-for-dictdef-storagebucketoptions">
   <span id="infopaneltitle-for-dictdef-storagebucketoptions" style="display:none">Info about the 'StorageBucketOptions' definition.</span><b><a href="#dictdef-storagebucketoptions">#dictdef-storagebucketoptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-storagebucketoptions">1. The StorageBucketManager interface</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucketoptions-persisted" class="dfn-panel" data-for="dom-storagebucketoptions-persisted" id="infopanel-for-dom-storagebucketoptions-persisted">
   <span id="infopaneltitle-for-dom-storagebucketoptions-persisted" style="display:none">Info about the 'persisted' definition.</span><b><a href="#dom-storagebucketoptions-persisted">#dom-storagebucketoptions-persisted</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucketoptions-persisted">1.1. Creating a bucket</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucketoptions-durability" class="dfn-panel" data-for="dom-storagebucketoptions-durability" id="infopanel-for-dom-storagebucketoptions-durability">
   <span id="infopaneltitle-for-dom-storagebucketoptions-durability" style="display:none">Info about the 'durability' definition.</span><b><a href="#dom-storagebucketoptions-durability">#dom-storagebucketoptions-durability</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucketoptions-durability">1.1. Creating a bucket</a> <a href="#ref-for-dom-storagebucketoptions-durability①">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucketoptions-quota" class="dfn-panel" data-for="dom-storagebucketoptions-quota" id="infopanel-for-dom-storagebucketoptions-quota">
   <span id="infopaneltitle-for-dom-storagebucketoptions-quota" style="display:none">Info about the 'quota' definition.</span><b><a href="#dom-storagebucketoptions-quota">#dom-storagebucketoptions-quota</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucketoptions-quota">1.1. Creating a bucket</a> <a href="#ref-for-dom-storagebucketoptions-quota①">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucketoptions-expires" class="dfn-panel" data-for="dom-storagebucketoptions-expires" id="infopanel-for-dom-storagebucketoptions-expires">
   <span id="infopaneltitle-for-dom-storagebucketoptions-expires" style="display:none">Info about the 'expires' definition.</span><b><a href="#dom-storagebucketoptions-expires">#dom-storagebucketoptions-expires</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucketoptions-expires">1.1. Creating a bucket</a> <a href="#ref-for-dom-storagebucketoptions-expires①">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucketmanager-open" class="dfn-panel" data-for="dom-storagebucketmanager-open" id="infopanel-for-dom-storagebucketmanager-open">
   <span id="infopaneltitle-for-dom-storagebucketmanager-open" style="display:none">Info about the 'open(name, options)' definition.</span><b><a href="#dom-storagebucketmanager-open">#dom-storagebucketmanager-open</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucketmanager-open">1. The StorageBucketManager interface</a>
    <li><a href="#ref-for-dom-storagebucketmanager-open①">2.4. Expiration</a> <a href="#ref-for-dom-storagebucketmanager-open②">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-open-a-bucket" class="dfn-panel" data-for="open-a-bucket" id="infopanel-for-open-a-bucket">
   <span id="infopaneltitle-for-open-a-bucket" style="display:none">Info about the 'open a bucket' definition.</span><b><a href="#open-a-bucket">#open-a-bucket</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-open-a-bucket">1.1. Creating a bucket</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-validate-a-bucket-name" class="dfn-panel" data-for="validate-a-bucket-name" id="infopanel-for-validate-a-bucket-name">
   <span id="infopaneltitle-for-validate-a-bucket-name" style="display:none">Info about the 'validate a bucket name' definition.</span><b><a href="#validate-a-bucket-name">#validate-a-bucket-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-validate-a-bucket-name">1.1. Creating a bucket</a>
    <li><a href="#ref-for-validate-a-bucket-name①">1.2. Deleting a bucket</a>
    <li><a href="#ref-for-validate-a-bucket-name②">2.6. Clear Site Data integration</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-get-or-expire-a-bucket" class="dfn-panel" data-for="get-or-expire-a-bucket" id="infopanel-for-get-or-expire-a-bucket">
   <span id="infopaneltitle-for-get-or-expire-a-bucket" style="display:none">Info about the 'get or expire a bucket' definition.</span><b><a href="#get-or-expire-a-bucket">#get-or-expire-a-bucket</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-get-or-expire-a-bucket">1.1. Creating a bucket</a>
    <li><a href="#ref-for-get-or-expire-a-bucket①">1.3. Enumerating buckets</a>
    <li><a href="#ref-for-get-or-expire-a-bucket②">2.4. Expiration</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucketmanager-delete" class="dfn-panel" data-for="dom-storagebucketmanager-delete" id="infopanel-for-dom-storagebucketmanager-delete">
   <span id="infopaneltitle-for-dom-storagebucketmanager-delete" style="display:none">Info about the 'delete(name)' definition.</span><b><a href="#dom-storagebucketmanager-delete">#dom-storagebucketmanager-delete</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucketmanager-delete">1. The StorageBucketManager interface</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-remove-a-bucket" class="dfn-panel" data-for="remove-a-bucket" id="infopanel-for-remove-a-bucket">
   <span id="infopaneltitle-for-remove-a-bucket" style="display:none">Info about the 'remove a bucket' definition.</span><b><a href="#remove-a-bucket">#remove-a-bucket</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-remove-a-bucket">1.2. Deleting a bucket</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucketmanager-keys" class="dfn-panel" data-for="dom-storagebucketmanager-keys" id="infopanel-for-dom-storagebucketmanager-keys">
   <span id="infopaneltitle-for-dom-storagebucketmanager-keys" style="display:none">Info about the 'keys()' definition.</span><b><a href="#dom-storagebucketmanager-keys">#dom-storagebucketmanager-keys</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucketmanager-keys">1. The StorageBucketManager interface</a>
    <li><a href="#ref-for-dom-storagebucketmanager-keys①">2.4. Expiration</a> <a href="#ref-for-dom-storagebucketmanager-keys②">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-storagebucket" class="dfn-panel" data-for="storagebucket" id="infopanel-for-storagebucket">
   <span id="infopaneltitle-for-storagebucket" style="display:none">Info about the 'StorageBucket' definition.</span><b><a href="#storagebucket">#storagebucket</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storagebucket">1. The StorageBucketManager interface</a>
    <li><a href="#ref-for-storagebucket①">1.1. Creating a bucket</a> <a href="#ref-for-storagebucket②">(2)</a>
    <li><a href="#ref-for-storagebucket③">2. The StorageBucket interface</a> <a href="#ref-for-storagebucket④">(2)</a>
    <li><a href="#ref-for-storagebucket⑤">2.5.1. Using Indexed Database</a>
    <li><a href="#ref-for-storagebucket⑥">2.5.2. Using CacheStorage</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-storage-bucket-removed" class="dfn-panel" data-for="storage-bucket-removed" id="infopanel-for-storage-bucket-removed">
   <span id="infopaneltitle-for-storage-bucket-removed" style="display:none">Info about the 'removed' definition.</span><b><a href="#storage-bucket-removed">#storage-bucket-removed</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-bucket-removed">1.1. Creating a bucket</a>
    <li><a href="#ref-for-storage-bucket-removed①">1.2. Deleting a bucket</a>
    <li><a href="#ref-for-storage-bucket-removed②">2.1. Persistence</a> <a href="#ref-for-storage-bucket-removed③">(2)</a>
    <li><a href="#ref-for-storage-bucket-removed④">2.2. Quota</a>
    <li><a href="#ref-for-storage-bucket-removed⑤">2.3. Durability</a>
    <li><a href="#ref-for-storage-bucket-removed⑥">2.4. Expiration</a> <a href="#ref-for-storage-bucket-removed⑦">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucket-persist" class="dfn-panel" data-for="dom-storagebucket-persist" id="infopanel-for-dom-storagebucket-persist">
   <span id="infopaneltitle-for-dom-storagebucket-persist" style="display:none">Info about the 'persist()' definition.</span><b><a href="#dom-storagebucket-persist">#dom-storagebucket-persist</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucket-persist">2. The StorageBucket interface</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucket-persisted" class="dfn-panel" data-for="dom-storagebucket-persisted" id="infopanel-for-dom-storagebucket-persisted">
   <span id="infopaneltitle-for-dom-storagebucket-persisted" style="display:none">Info about the 'persisted()' definition.</span><b><a href="#dom-storagebucket-persisted">#dom-storagebucket-persisted</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucket-persisted">2. The StorageBucket interface</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-storagebucket-quota-value" class="dfn-panel" data-for="storagebucket-quota-value" id="infopanel-for-storagebucket-quota-value">
   <span id="infopaneltitle-for-storagebucket-quota-value" style="display:none">Info about the 'quota value' definition.</span><b><a href="#storagebucket-quota-value">#storagebucket-quota-value</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storagebucket-quota-value">1.1. Creating a bucket</a>
    <li><a href="#ref-for-storagebucket-quota-value①">2.2. Quota</a> <a href="#ref-for-storagebucket-quota-value②">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-storage-bucket-storage-usage" class="dfn-panel" data-for="storage-bucket-storage-usage" id="infopanel-for-storage-bucket-storage-usage">
   <span id="infopaneltitle-for-storage-bucket-storage-usage" style="display:none">Info about the 'storage usage' definition.</span><b><a href="#storage-bucket-storage-usage">#storage-bucket-storage-usage</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-bucket-storage-usage">2.2. Quota</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucket-estimate" class="dfn-panel" data-for="dom-storagebucket-estimate" id="infopanel-for-dom-storagebucket-estimate">
   <span id="infopaneltitle-for-dom-storagebucket-estimate" style="display:none">Info about the 'estimate()' definition.</span><b><a href="#dom-storagebucket-estimate">#dom-storagebucket-estimate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucket-estimate">2. The StorageBucket interface</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-storagebucket-durability-value" class="dfn-panel" data-for="storagebucket-durability-value" id="infopanel-for-storagebucket-durability-value">
   <span id="infopaneltitle-for-storagebucket-durability-value" style="display:none">Info about the 'durability value' definition.</span><b><a href="#storagebucket-durability-value">#storagebucket-durability-value</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storagebucket-durability-value">1.1. Creating a bucket</a> <a href="#ref-for-storagebucket-durability-value①">(2)</a> <a href="#ref-for-storagebucket-durability-value②">(3)</a>
    <li><a href="#ref-for-storagebucket-durability-value③">2.3. Durability</a> <a href="#ref-for-storagebucket-durability-value④">(2)</a> <a href="#ref-for-storagebucket-durability-value⑤">(3)</a> <a href="#ref-for-storagebucket-durability-value⑥">(4)</a>
    <li><a href="#ref-for-storagebucket-durability-value⑦">2.5.1. Using Indexed Database</a> <a href="#ref-for-storagebucket-durability-value⑧">(2)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucket-durability" class="dfn-panel" data-for="dom-storagebucket-durability" id="infopanel-for-dom-storagebucket-durability">
   <span id="infopaneltitle-for-dom-storagebucket-durability" style="display:none">Info about the 'durability()' definition.</span><b><a href="#dom-storagebucket-durability">#dom-storagebucket-durability</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucket-durability">1.1. Creating a bucket</a>
    <li><a href="#ref-for-dom-storagebucket-durability①">2. The StorageBucket interface</a>
    <li><a href="#ref-for-dom-storagebucket-durability②">2.3. Durability</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-storagebucket-expiration-time" class="dfn-panel" data-for="storagebucket-expiration-time" id="infopanel-for-storagebucket-expiration-time">
   <span id="infopaneltitle-for-storagebucket-expiration-time" style="display:none">Info about the 'expiration time' definition.</span><b><a href="#storagebucket-expiration-time">#storagebucket-expiration-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storagebucket-expiration-time">1.1. Creating a bucket</a> <a href="#ref-for-storagebucket-expiration-time①">(2)</a>
    <li><a href="#ref-for-storagebucket-expiration-time②">2.4. Expiration</a> <a href="#ref-for-storagebucket-expiration-time③">(2)</a> <a href="#ref-for-storagebucket-expiration-time④">(3)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucket-setexpires" class="dfn-panel" data-for="dom-storagebucket-setexpires" id="infopanel-for-dom-storagebucket-setexpires">
   <span id="infopaneltitle-for-dom-storagebucket-setexpires" style="display:none">Info about the 'setExpires(expires)' definition.</span><b><a href="#dom-storagebucket-setexpires">#dom-storagebucket-setexpires</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucket-setexpires">2. The StorageBucket interface</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucket-expires" class="dfn-panel" data-for="dom-storagebucket-expires" id="infopanel-for-dom-storagebucket-expires">
   <span id="infopaneltitle-for-dom-storagebucket-expires" style="display:none">Info about the 'expires()' definition.</span><b><a href="#dom-storagebucket-expires">#dom-storagebucket-expires</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucket-expires">2. The StorageBucket interface</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucket-indexeddb" class="dfn-panel" data-for="dom-storagebucket-indexeddb" id="infopanel-for-dom-storagebucket-indexeddb">
   <span id="infopaneltitle-for-dom-storagebucket-indexeddb" style="display:none">Info about the 'indexedDB' definition.</span><b><a href="#dom-storagebucket-indexeddb">#dom-storagebucket-indexeddb</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucket-indexeddb">2. The StorageBucket interface</a>
    <li><a href="#ref-for-dom-storagebucket-indexeddb①">2.5.1. Using Indexed Database</a> <a href="#ref-for-dom-storagebucket-indexeddb②">(2)</a> <a href="#ref-for-dom-storagebucket-indexeddb③">(3)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucket-caches" class="dfn-panel" data-for="dom-storagebucket-caches" id="infopanel-for-dom-storagebucket-caches">
   <span id="infopaneltitle-for-dom-storagebucket-caches" style="display:none">Info about the 'caches' definition.</span><b><a href="#dom-storagebucket-caches">#dom-storagebucket-caches</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucket-caches">2. The StorageBucket interface</a>
    <li><a href="#ref-for-dom-storagebucket-caches①">2.5.2. Using CacheStorage</a> <a href="#ref-for-dom-storagebucket-caches②">(2)</a> <a href="#ref-for-dom-storagebucket-caches③">(3)</a>
   </ul>
  </aside>
  <aside aria-labelledby="infopaneltitle-for-dom-storagebucket-getdirectory" class="dfn-panel" data-for="dom-storagebucket-getdirectory" id="infopanel-for-dom-storagebucket-getdirectory">
   <span id="infopaneltitle-for-dom-storagebucket-getdirectory" style="display:none">Info about the 'getDirectory()' definition.</span><b><a href="#dom-storagebucket-getdirectory">#dom-storagebucket-getdirectory</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagebucket-getdirectory">2. The StorageBucket interface</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */
"use strict";
{
    function queryAll(sel) {
        return [].slice.call(document.querySelectorAll(sel));
    }

    // Add popup behavior to all dfns to show the corresponding dfn-panel.
    var dfns = document.querySelectorAll('.dfn-paneled');
    for (let dfn of dfns) { insertDfnPopupAction(dfn); }

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });

    function hideAllDfnPanels() {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>hideDfnPanel(el));
    }

    function showDfnPanel(dfnPanel, dfn) {
        hideAllDfnPanels(); // Only display one at this time.
        dfn.setAttribute("aria-expanded", "true");
        dfnPanel.classList.add("on");
        dfnPanel.style.left = "5px";
        dfnPanel.style.top = "0px";
        const panelRect = dfnPanel.getBoundingClientRect();
        const panelWidth = panelRect.right - panelRect.left;
        if (panelRect.right > document.body.scrollWidth) {
            // Panel's overflowing the screen.
            // Just drop it below the dfn and flip it rightward instead.
            // This still wont' fix things if the screen is *really* wide,
            // but fixing that's a lot harder without 'anchor()'.
            dfnPanel.style.top = "1.5em";
            dfnPanel.style.left = "auto";
            dfnPanel.style.right = "0px";
        }
    }

    function pinDfnPanel(dfnPanel) {
        // Switch it to "activated" state, which pins it.
        dfnPanel.classList.add("activated");
        dfnPanel.style.left = null;
        dfnPanel.style.top = null;
    }

    function hideDfnPanel(dfnPanel, dfn) {
        if(!dfn) {
            dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
        }
        dfn.setAttribute("aria-expanded", "false")
        dfnPanel.classList.remove("on");
        dfnPanel.classList.remove("activated");
    }

    function toggleDfnPanel(dfnPanel, dfn) {
        if(dfnPanel.classList.contains("on")) {
            hideDfnPanel(dfnPanel, dfn);
        } else {
            showDfnPanel(dfnPanel, dfn);
        }
    }

    function insertDfnPopupAction(dfn) {
        // Find dfn panel
        const dfnPanel = document.querySelector(`.dfn-panel[data-for='${dfn.id}']`);
        if (dfnPanel) {
            const panelWrapper = document.createElement('span');
            panelWrapper.appendChild(dfnPanel);
            panelWrapper.style.position = "relative";
            panelWrapper.style.height = "0px";
            dfn.insertAdjacentElement("afterend", panelWrapper);
            dfn.setAttribute('role', 'button');
            dfn.setAttribute('aria-expanded', 'false')
            dfn.tabIndex = 0;
            dfn.classList.add('has-dfn-panel');
            dfn.addEventListener('click', (event) => {
                showDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
            });
            dfn.addEventListener('keypress', (event) => {
                const kc = event.keyCode;
                // 32->Space, 13->Enter
                if(kc == 32 || kc == 13) {
                    toggleDfnPanel(dfnPanel, dfn);
                    event.stopPropagation();
                    event.preventDefault();
                }
            });

            dfnPanel.addEventListener('click', (event) => {
                pinDfnPanel(dfnPanel);
                event.stopPropagation();
            });

            dfnPanel.addEventListener('keydown', (event) => {
                if(event.keyCode == 27) { // Escape key
                    hideDfnPanel(dfnPanel, dfn);
                    event.stopPropagation();
                    event.preventDefault();
                }
            })

        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + dfn.id + "']");
        }
    }
}
</script>
<script>/* script-var-click-highlighting */

    "use strict";
    {
        document.addEventListener("click", e=>{
            if(e.target.nodeName == "VAR") {
                highlightSameAlgoVars(e.target);
            }
        });
        const indexCounts = new Map();
        const indexNames = new Map();
        function highlightSameAlgoVars(v) {
            // Find the algorithm container.
            let algoContainer = null;
            let searchEl = v;
            while(algoContainer == null && searchEl != document.body) {
                searchEl = searchEl.parentNode;
                if(searchEl.hasAttribute("data-algorithm")) {
                    algoContainer = searchEl;
                }
            }

            // Not highlighting document-global vars,
            // too likely to be unrelated.
            if(algoContainer == null) return;

            const algoName = algoContainer.getAttribute("data-algorithm");
            const varName = getVarName(v);
            const addClass = !v.classList.contains("selected");
            let highlightClass = null;
            if(addClass) {
                const index = chooseHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] += 1;
                indexNames.set(algoName+"///"+varName, index);
                highlightClass = nameFromIndex(index);
            } else {
                const index = previousHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] -= 1;
                highlightClass = nameFromIndex(index);
            }

            // Find all same-name vars, and toggle their class appropriately.
            for(const el of algoContainer.querySelectorAll("var")) {
                if(getVarName(el) == varName) {
                    el.classList.toggle("selected", addClass);
                    el.classList.toggle(highlightClass, addClass);
                }
            }
        }
        function getVarName(el) {
            return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
        }
        function chooseHighlightIndex(algoName, varName) {
            let indexes = null;
            if(indexCounts.has(algoName)) {
                indexes = indexCounts.get(algoName);
            } else {
                // 7 classes right now
                indexes = [0,0,0,0,0,0,0];
                indexCounts.set(algoName, indexes);
            }

            // If the element was recently unclicked,
            // *and* that color is still unclaimed,
            // give it back the same color.
            const lastIndex = previousHighlightIndex(algoName, varName);
            if(indexes[lastIndex] === 0) return lastIndex;

            // Find the earliest index with the lowest count.
            const minCount = Math.min.apply(null, indexes);
            let index = null;
            for(var i = 0; i < indexes.length; i++) {
                if(indexes[i] == minCount) {
                    return i;
                }
            }
        }
        function previousHighlightIndex(algoName, varName) {
            return indexNames.get(algoName+"///"+varName);
        }
        function nameFromIndex(index) {
            return "selected" + index;
        }
    }
    </script>